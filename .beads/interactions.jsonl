{"id":"letta-opencode-plugin-01o","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:04:07.084993188Z","updated_at":"2025-12-24T03:04:07.084993188Z","comments":[{"id":199,"issue_id":"letta-opencode-plugin-01o","author":"node","text":"Synced from Beads: letta-opencode-plugin-6vj\n\n---\nHuly Issue: LETTA-87","created_at":"2025-12-24T03:04:07Z"}]}
{"id":"letta-opencode-plugin-08q","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:31:42.521509486Z","updated_at":"2025-12-23T20:31:42.521509486Z","comments":[{"id":128,"issue_id":"letta-opencode-plugin-08q","author":"node","text":"## Objective\n\nDevelop a message routing service that bridges Matrix room events to OpenCode task execution and vice versa, ensuring messages reach the correct participants and trigger appropriate actions.\n\n## Scope\n\n- Subscribe to Matrix room events for task rooms\n- Forward relevant messages to OpenCode execution instances\n- Relay OpenCode-generated updates (status, artifacts) back to Matrix room\n- Ensure messages are tagged with task metadata for routing\n\n## Acceptance Criteria\n\n- Matrix messages with  metadata are parsed and routed correctly\n- OpenCode status updates appear in Matrix room with proper formatting\n- Guidance requests are relayed to calling agent and responses returned to dev agent\n- Error handling and retries are implemented for message delivery failures\n\n## Notes\n\n- Coordinate with WorkspaceManager to update memory blocks\n- Ensure human participants receive relevant updates without control permissions\n- Use Matrix event IDs for tracking and deduplication\n\n---\nHuly Issue: LETTA-19","created_at":"2025-12-23T20:31:42Z"}]}
{"id":"letta-opencode-plugin-09l","title":"Matrix task room manager service","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.88743345Z","updated_at":"2025-12-22T23:47:02.88743345Z","comments":[{"id":29,"issue_id":"letta-opencode-plugin-09l","author":"node","text":"## Objective\n\nCreate a Matrix room manager service responsible for lifecycle management of task-specific rooms, including creation, participant management, and teardown.\n\n## Scope\n\n- Define MatrixRoomManager interface\n- Implement room creation with task metadata (name, topic, tags)\n- Invite participants (calling agent, dev agent, optional human observers)\n- Manage room permissions (widget support, read-only observers)\n- Handle room closure and archival\n\n## Acceptance Criteria\n\n- Calling  creates Matrix room titled  with topic set to task description\n-  handles both agent IDs and human Matrix user IDs\n-  archives room and posts closing summary\n- Room metadata includes task ID, agent IDs, timestamps\n\n## Notes\n\n- Use  patterns for power levels\n- Ensure human observers default to read-only permissions\n- Store room metadata in workspace block for retrieval\n\n---\nHuly Issue: LETTA-17","created_at":"2025-12-22T23:47:02Z"}]}
{"id":"letta-opencode-plugin-0eb","title":"Repo bootstrap: letta-x-opencode skeleton (HTTP MCP server)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:34:56.417756745Z","updated_at":"2025-12-23T22:34:56.417756745Z"}
{"id":"letta-opencode-plugin-0i8","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:40:15.670708542Z","updated_at":"2025-12-24T02:40:15.670708542Z","comments":[{"id":190,"issue_id":"letta-opencode-plugin-0i8","author":"node","text":"Synced from Beads: letta-opencode-plugin-5fx\n\n---\nHuly Issue: LETTA-95","created_at":"2025-12-24T02:40:15Z"}]}
{"id":"letta-opencode-plugin-0lv","title":"MCP tools: opencode_execute_task (async/sync) with idempotency + queue","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.822896246Z","updated_at":"2025-12-22T23:47:02.822896246Z"}
{"id":"letta-opencode-plugin-1dv","title":"Research Letta TypeScript SDK capabilities and API patterns","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:01:39.251046974Z","updated_at":"2025-12-23T23:48:25.40755008Z"}
{"id":"letta-opencode-plugin-1er","title":"Repo bootstrap: letta-x-opencode skeleton (HTTP MCP server)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:26:26.296396703Z","updated_at":"2025-12-23T23:26:26.296396703Z","comments":[{"id":150,"issue_id":"letta-opencode-plugin-1er","author":"node","text":"Synced from Beads: letta-opencode-plugin-dga\n\n---\nHuly Issue: LETTA-82","created_at":"2025-12-23T23:26:26Z"}]}
{"id":"letta-opencode-plugin-24k","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T03:11:47.647032337Z","updated_at":"2025-12-24T03:11:47.647032337Z","comments":[{"id":203,"issue_id":"letta-opencode-plugin-24k","author":"node","text":"Synced from Beads: letta-opencode-plugin-ce3\n\n---\nHuly Issue: LETTA-114","created_at":"2025-12-24T03:11:47Z"}]}
{"id":"letta-opencode-plugin-2bd","title":"Implement event pruning to prevent workspace block overflow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:41:54.990309485Z","updated_at":"2025-12-24T02:41:54.990309485Z","comments":[{"id":191,"issue_id":"letta-opencode-plugin-2bd","author":"node","text":"Synced from Beads: letta-opencode-plugin-y5m\n\n---\nHuly Issue: LETTA-95","created_at":"2025-12-24T02:41:55Z"}]}
{"id":"letta-opencode-plugin-2k9","title":"Matrix client integration for Letta OpenCode Plugin","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:21:14.821172115Z","updated_at":"2025-12-23T23:35:59.916785318Z","comments":[{"id":97,"issue_id":"letta-opencode-plugin-2k9","author":"node","text":"Subscribe to /event stream via SDK and forward mapped events into Workspace blocks (task_started, task_progress, task_completed, task_failed). If Matrix is enabled, send concise status updates to the room. Include resiliency (reconnect on drop).\n\nAcceptance Criteria:\n\n- Event stream connected with backoff retry\n- Events mapped and persisted in Workspace\n- Matrix notifications sent when enabled\n- Load-tested with long-running sessions\n\nOwners: @backend @realtime\nDue date: 2025-11-05\n\n---\nHuly Issue: LETTA-28","created_at":"2025-12-23T18:21:15Z"}]}
{"id":"letta-opencode-plugin-2m9","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:46:44.026739859Z","updated_at":"2025-12-24T02:46:44.026739859Z","comments":[{"id":193,"issue_id":"letta-opencode-plugin-2m9","author":"node","text":"Synced from Beads: letta-opencode-plugin-tfw\n\n---\nHuly Issue: LETTA-93","created_at":"2025-12-24T02:46:44Z"}]}
{"id":"letta-opencode-plugin-2us","title":"Evaluate and reuse opencode-mcp-tool repo for MCP server scaffolding","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.890697325Z","updated_at":"2025-12-22T23:47:00.890697325Z","comments":[{"id":18,"issue_id":"letta-opencode-plugin-2us","author":"node","text":"## Objective\n\nReview the archived repo https://github.com/frap129/opencode-mcp-tool and decide what to reuse for our MCP-only OpenCode appendage server.\n\n## Findings (initial)\n\n- Uses @modelcontextprotocol/sdk v0.5.0 (outdated) and StdioServerTransport only\n- Provides MCP server skeleton with tools registry, prompts, progress notifications/keepalive\n- Tools implemented: ask-opencode, brainstorm, timeout-test, ping, help, slash commands\n- Executes OpenCode via local CLI (no containerization, no Letta integration)\n- No auth, idempotency, queuing, or workspace block concepts\n- MIT licensed (compatible for reuse)\n\n## Reuse Plan\n\n- Reuse: tool registry pattern, progress notification keepalive loop, CLI execution wrapper abstraction\n- Replace: transport with Streamable HTTP, SDK ^1.16.0, tool set with our  +  tools\n- Add: Letta API client, Execution Manager (container spawn/limits), idempotency/queue, optimistic concurrency on workspace blocks\n\n## Deliverables\n\n1. Delta design doc (what to keep, what to change)\n2. Migration tasks list (SDK upgrade, transport switch, new tools, remove legacy tools)\n3. Spike PR to port skeleton and boot a streamable HTTP MCP server\n\n## Acceptance Criteria\n\n- Documented decision (reuse vs fresh)\n- If reuse: working HTTP MCP server boots with health log\n- Clear task breakdown for upgrade path\n\n---\nHuly Issue: LETTA-7","created_at":"2025-12-22T23:47:00Z"}]}
{"id":"letta-opencode-plugin-2wm","title":"Design ExecutionManager refactor to use OpenCode HTTP API","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:45.452494992Z","updated_at":"2025-12-22T23:47:01.491238826Z","comments":[{"id":4,"issue_id":"letta-opencode-plugin-2wm","author":"node","text":"Refactor ExecutionManager to start an OpenCode server container (opencode serve) per task and connect via @opencode-ai/sdk. Implement session creation, prompt sending, event streaming, and graceful shutdown.\n\nAcceptance Criteria:\n\n- Container starts with opencode serve exposed\n- SDK client connects and creates a session\n- Prompt is sent and responses handled\n- Events streamed to WorkspaceManager\n- Cancel maps to session.abort()\n- Pause/resume placeholder behavior documented\n\nOwners: @backend @platform\nDue date: 2025-11-01\n\n---\nHuly Issue: LETTA-26","created_at":"2025-12-22T23:40:45Z"}]}
{"id":"letta-opencode-plugin-2x8","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T21:31:28.063410019Z","updated_at":"2025-12-23T21:31:28.063410019Z","comments":[{"id":134,"issue_id":"letta-opencode-plugin-2x8","author":"node","text":"Add integration tests that spin up an OpenCode server container, run a session, stream events, read files, and verify workspace/matrix updates. Include timeout and cancel flows. Gate CI on these.\n\nAcceptance Criteria:\n\n- Test suite covers happy path, errors, timeout, cancel\n- CI runs tests in isolated environment with Docker\n- Flakiness under 1%\n\nOwners: @backend @qa\nDue date: 2025-12-05\n\n---\nHuly Issue: LETTA-34","created_at":"2025-12-23T21:31:28Z"}]}
{"id":"letta-opencode-plugin-2z0","title":"Add pagination to get_task_history tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:07:06.402768289Z","updated_at":"2025-12-23T18:07:06.402768289Z","comments":[{"id":87,"issue_id":"letta-opencode-plugin-2z0","author":"node","text":"## Issue\n\nThe  tool returns ALL events, which could be thousands for long-running tasks.\n\n### Required Implementation\n\nAdd pagination parameters:\n\n\n\nReturn paginated response with metadata.\n\n### Files to Update\n\n-  - Add pagination logic\n-  - Update tool schema\n\n### Acceptance Criteria\n\n- [ ] Default limit of 100 events\n- [ ] Returns pagination metadata\n- [ ] Backwards compatible (limit=-1 returns all)\n- [ ] Tested with 500+ event tasks\n\n---\nHuly Issue: LETTA-39","created_at":"2025-12-23T18:07:06Z"}]}
{"id":"letta-opencode-plugin-2zv","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:49:04.579011914Z","updated_at":"2025-12-24T02:49:04.579011914Z","comments":[{"id":194,"issue_id":"letta-opencode-plugin-2zv","author":"node","text":"Synced from Beads: letta-opencode-plugin-yrz\n\n---\nHuly Issue: LETTA-92","created_at":"2025-12-24T02:49:04Z"}]}
{"id":"letta-opencode-plugin-3ep","title":"MCP Server MVP: OpenCode Appendage for Letta (Epic)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:17:30.526725263Z","updated_at":"2025-12-23T18:17:30.526725263Z","comments":[{"id":94,"issue_id":"letta-opencode-plugin-3ep","author":"node","text":"Epic tracking the MVP delivery of the OpenCode MCP server (HTTP/JSON-RPC) that executes delegated tasks from Letta agents, inherits agent context via Letta API, and reports progress/results via a workspace memory block. Scope excludes Matrix for v1.\n\n---\nHuly Issue: LETTA-8","created_at":"2025-12-23T18:17:30Z"}]}
{"id":"letta-opencode-plugin-3il","title":"Research Letta TypeScript SDK capabilities and API patterns","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:36:36.697234972Z","updated_at":"2025-12-24T02:36:36.697234972Z","comments":[{"id":188,"issue_id":"letta-opencode-plugin-3il","author":"node","text":"Synced from Beads: letta-opencode-plugin-zar\n\n---\nHuly Issue: LETTA-97","created_at":"2025-12-24T02:36:36Z"}]}
{"id":"letta-opencode-plugin-3pb","title":"Metrics, logs, kill switches + docs","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:25:28.25223968Z","updated_at":"2025-12-24T02:25:28.25223968Z","comments":[{"id":184,"issue_id":"letta-opencode-plugin-3pb","author":"node","text":"Synced from Beads: letta-opencode-plugin-q00\n\n---\nHuly Issue: LETTA-102","created_at":"2025-12-24T02:25:28Z"}]}
{"id":"letta-opencode-plugin-3r9","title":"Implement bidirectional communication via memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:22:22.005457586Z","updated_at":"2025-12-23T18:22:22.005457586Z"}
{"id":"letta-opencode-plugin-3rc","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T20:06:10.726360447Z","updated_at":"2025-12-23T20:06:10.726360447Z","comments":[{"id":119,"issue_id":"letta-opencode-plugin-3rc","author":"node","text":"Wire MCP send_task_control -\u003e OpenCode semantics. Map cancel to session.abort(), decide on pause/resume semantics (document behavior or emulate with container pause/unpause). Ensure workspace/matrix events reflect control outcomes.\n\nAcceptance Criteria:\n\n- cancel calls abort and tears down cleanly\n- pause/resume behavior documented (and implemented if feasible)\n- Workspace and Matrix reflect control changes\n\nOwners: @backend\nDue date: 2025-11-10\n\n---\nHuly Issue: LETTA-31","created_at":"2025-12-23T20:06:10Z"}]}
{"id":"letta-opencode-plugin-4rc","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:46:35.470792698Z","updated_at":"2025-12-23T23:46:35.470792698Z","comments":[{"id":161,"issue_id":"letta-opencode-plugin-4rc","author":"node","text":"Synced from Beads: letta-opencode-plugin-p40\n\n---\nHuly Issue: LETTA-74","created_at":"2025-12-23T23:46:35Z"}]}
{"id":"letta-opencode-plugin-4uh","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:07:03.460822912Z","updated_at":"2025-12-24T02:07:03.460822912Z","comments":[{"id":175,"issue_id":"letta-opencode-plugin-4uh","author":"node","text":"Synced from Beads: letta-opencode-plugin-46e\n\n---\nHuly Issue: LETTA-109","created_at":"2025-12-24T02:07:03Z"}]}
{"id":"letta-opencode-plugin-56d","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T19:48:51.092261463Z","updated_at":"2025-12-23T19:48:51.092261463Z"}
{"id":"letta-opencode-plugin-56e","title":"Human-in-the-loop participation via Matrix","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.698791272Z","updated_at":"2025-12-22T23:47:01.698791272Z","comments":[{"id":22,"issue_id":"letta-opencode-plugin-56e","author":"node","text":"## Objective\n\nEnable optional human participation in OpenCode task rooms, allowing human PMs or experts to observe, intervene, and provide feedback through Matrix.\n\n## Scope\n\n- Add configuration for default human observers per task\n- Ensure human observers are invited with read-only permissions by default\n- Provide commands/actions for humans to escalate (e.g., request changes, halt execution)\n- Document human participation workflow\n\n## Acceptance Criteria\n\n- Human user receives invitation when enabled in configuration\n- Human messages are routed to both Letta calling agent and OpenCode dev agent\n- Human can trigger task cancellation or request changes via Matrix command\n- Documentation covers how humans join and interact with task rooms\n\n## Notes\n\n- Coordinate with permissions helper for power levels\n- Ensure logging for human interventions for auditing\n- Provide optional manual invitation command for ad-hoc observers\n\n---\nHuly Issue: LETTA-20","created_at":"2025-12-22T23:47:01Z"}]}
{"id":"letta-opencode-plugin-59d","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:48:10.631979438Z","updated_at":"2025-12-23T21:48:10.631979438Z","comments":[{"id":142,"issue_id":"letta-opencode-plugin-59d","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T21:48:10Z"}]}
{"id":"letta-opencode-plugin-5ij","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T02:20:00.621263892Z","updated_at":"2025-12-24T02:20:00.621263892Z","comments":[{"id":181,"issue_id":"letta-opencode-plugin-5ij","author":"node","text":"Synced from Beads: letta-opencode-plugin-wi2\n\n---\nHuly Issue: LETTA-104","created_at":"2025-12-24T02:20:00Z"}]}
{"id":"letta-opencode-plugin-5p6","title":"Execution Manager: container spawn/limits/timeouts/log tail","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.155252441Z","updated_at":"2025-12-22T23:47:01.155252441Z"}
{"id":"letta-opencode-plugin-63z","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:17:36.542197856Z","updated_at":"2025-12-23T22:17:36.542197856Z","comments":[{"id":144,"issue_id":"letta-opencode-plugin-63z","author":"node","text":"Objective: Migrate Letta OpenCode Plugin from invoking Claude CLI directly to integrating with the OpenCode headless HTTP server (opencode serve) using the official @opencode-ai/sdk.\n\nWhy:\n\n- Structured API for sessions, messages, files\n- Real-time event streaming via /event\n- Better control (abort, observe, permissions)\n- File/status access and richer results\n\nScope:\n\n- Build/run OpenCode server in Docker per task\n- Connect via @opencode-ai/sdk client\n- Create/manage sessions, send prompts, stream events\n- Map events to Workspace blocks and Matrix\n- Expose file tools to agents (list/read)\n- Maintain current tool surface and memory lifecycle\n- Backward-compat flag and rollout plan\n\nDone when:\n\n- All existing tools continue to work\n- New file access tools available\n- Event stream updates arrive in Workspace\n- Control signals (cancel) mapped to abort\n- Tests pass and deployment stable\n\n---\nHuly Issue: LETTA-25","created_at":"2025-12-23T22:17:36Z"}]}
{"id":"letta-opencode-plugin-6fd","title":"Add file access tools: get_task_files, read_task_file","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:40:46.445012916Z","updated_at":"2025-12-22T23:47:02.670217257Z","comments":[{"id":9,"issue_id":"letta-opencode-plugin-6fd","author":"node","text":"Expose task file operations by powering them with OpenCode SDK: list changed/created files and read file content from the running session. Update server.ts with the new tools and docs.\n\nAcceptance Criteria:\n\n- get_task_files returns changed/created file list\n- read_task_file returns file content\n- Handles large files gracefully (truncate or stream)\n\nOwners: @backend\nDue date: 2025-11-08\n\n---\nHuly Issue: LETTA-29","created_at":"2025-12-22T23:40:46Z"}]}
{"id":"letta-opencode-plugin-6md","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:24:36.463711568Z","updated_at":"2025-12-23T22:24:36.463711568Z","comments":[{"id":147,"issue_id":"letta-opencode-plugin-6md","author":"node","text":"Subscribe to /event stream via SDK and forward mapped events into Workspace blocks (task_started, task_progress, task_completed, task_failed). If Matrix is enabled, send concise status updates to the room. Include resiliency (reconnect on drop).\n\nAcceptance Criteria:\n\n- Event stream connected with backoff retry\n- Events mapped and persisted in Workspace\n- Matrix notifications sent when enabled\n- Load-tested with long-running sessions\n\nOwners: @backend @realtime\nDue date: 2025-11-05\n\n---\nHuly Issue: LETTA-28","created_at":"2025-12-23T22:24:36Z"}]}
{"id":"letta-opencode-plugin-6ri","title":"Task cancellation, pause, and resume support","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.568614408Z","updated_at":"2025-12-22T23:47:02.568614408Z","comments":[{"id":27,"issue_id":"letta-opencode-plugin-6ri","author":"node","text":"## Objective\n\nAdd task control capabilities (cancel, pause, resume) to the Letta OpenCode Plugin and ensure they are triggered via Matrix commands.\n\n## Scope\n\n- Extend ExecutionManager to support pause/resume signals\n- Implement safe cancellation that stops Docker container execution\n- Connect Matrix control messages to task control actions\n- Update workspace blocks with control status changes\n\n## Acceptance Criteria\n\n- Sending  command in Matrix immediately stops task execution and updates status\n- Pause/resume commands suspend and resume container execution with logging\n- Workspace block events reflect control actions with timestamps\n- Automated tests cover control flows and error cases (e.g., pause before start)\n\n## Notes\n\n- Coordinate with TaskRegistry for status tracking\n- Consider Docker pause/unpause for container control\n- Ensure idempotent control actions (no double cancellation)\n\n---\nHuly Issue: LETTA-21","created_at":"2025-12-22T23:47:02Z"}]}
{"id":"letta-opencode-plugin-6rr","title":"Implement event pruning to prevent workspace block overflow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:15:45.784164891Z","updated_at":"2025-12-23T20:15:45.784164891Z"}
{"id":"letta-opencode-plugin-6vh","title":"Increase default MAX_CONCURRENT_TASKS from 3 to 10","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:59.945323913Z","updated_at":"2025-12-22T23:46:59.945323913Z","comments":[{"id":61,"issue_id":"letta-opencode-plugin-6vh","author":"node","text":"## Configuration Improvement\n\nCurrent max of 3 concurrent tasks is too conservative for production use.\n\n### Recommended Change\n\n\n\n### Justification\n\n- Modern hardware can handle 10+ Docker containers\n- Each container has resource limits (2 CPU, 2g RAM)\n- Current limit causes frequent 429 errors\n\n### Files to Update\n\n-  - Change default \"3\" to \"10\"\n-  - Update documentation\n\n### Acceptance Criteria\n\n- [ ] Default increased to 10\n- [ ] Still configurable via env var\n- [ ] Load tested with 10+ tasks\n- [ ] No resource exhaustion\n\n---\nHuly Issue: LETTA-41","created_at":"2025-12-23T17:19:36Z"}]}
{"id":"letta-opencode-plugin-743","title":"Research Letta TypeScript SDK capabilities and API patterns","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:04:59.614393495Z","updated_at":"2025-12-23T18:04:59.614393495Z","comments":[{"id":86,"issue_id":"letta-opencode-plugin-743","author":"node","text":"## Objective\n\nConduct comprehensive research on the Letta TypeScript SDK to understand its full capabilities, API patterns, and integration requirements for building an OpenCode plugin.\n\n## Research Areas\n\n### 1. SDK Client Initialization\n\n- Client setup for local server (http://localhost:8283)\n- Client setup for Letta Cloud (token + project authentication)\n- Configuration options and environment variables\n- Connection management and error handling\n\n### 2. Agent Management\n\n- Agent creation and configuration\n- Agent lifecycle operations (list, get, update, delete)\n- Agent state management\n- Tool attachment to agents\n\n### 3. Memory Operations\n\n- Core memory structure and management\n- Memory blocks (create, read, update, delete)\n- Archival memory operations\n- Memory persistence patterns\n\n### 4. Tool Management\n\n- Tool registration and discovery\n- MCP server tool integration\n- Tool execution and coordination\n- Custom tool creation\n\n### 5. Message Operations\n\n- Sending messages to agents\n- Message history retrieval\n- Streaming responses\n- Message formatting and context\n\n### 6. API Patterns\n\n- REST API endpoint structure\n- Request/response formats\n- Error handling conventions\n- Rate limiting and pagination\n\n## Documentation Sources\n\n- npm package: @letta-ai/letta-client\n- Letta API documentation (REST API reference)\n- Python SDK for comparison (letta-client)\n- Existing MCP integrations (letta-tools server)\n\n## Deliverables\n\n1. Comprehensive SDK capability matrix\n2. API endpoint documentation\n3. Authentication and configuration patterns\n4. Integration architecture design\n5. Tool interface specifications\n6. Example code snippets and patterns\n\n## Success Criteria\n\n- Complete understanding of SDK capabilities\n- Clear integration strategy defined\n- Technical architecture documented\n- Ready to begin implementation phase\n\n---\nHuly Issue: LETTA-1","created_at":"2025-12-23T18:04:59Z"}]}
{"id":"letta-opencode-plugin-759","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.858519494Z","updated_at":"2025-12-22T23:47:01.858519494Z","comments":[{"id":63,"issue_id":"letta-opencode-plugin-759","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T17:19:36Z"}]}
{"id":"letta-opencode-plugin-78q","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T21:33:01.218702014Z","updated_at":"2025-12-23T21:33:01.218702014Z","comments":[{"id":135,"issue_id":"letta-opencode-plugin-78q","author":"node","text":"Add integration tests that spin up an OpenCode server container, run a session, stream events, read files, and verify workspace/matrix updates. Include timeout and cancel flows. Gate CI on these.\n\nAcceptance Criteria:\n\n- Test suite covers happy path, errors, timeout, cancel\n- CI runs tests in isolated environment with Docker\n- Flakiness under 1%\n\nOwners: @backend @qa\nDue date: 2025-12-05\n\n---\nHuly Issue: LETTA-34","created_at":"2025-12-23T21:33:01Z"}]}
{"id":"letta-opencode-plugin-7a2","title":"Container lifecycle management for OpenCode server","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:44.518336616Z","updated_at":"2025-12-22T23:47:00.389622073Z","comments":[{"id":64,"issue_id":"letta-opencode-plugin-7a2","author":"node","text":"Start OpenCode server in detached mode per task, allocate dynamic ports, detect server readiness, health checks, and cleanup (kill, remove). Handle container IP/URL discovery for client connection. Add logging and error handling.\n\nAcceptance Criteria:\n\n- Container start/stop reliable across 100 runs\n- Server readiness detection under 5s median\n- Healthcheck endpoint monitored\n- Errors logged with containerId and taskId\n\nOwners: @platform\nDue date: 2025-10-30\n\n---\nHuly Issue: LETTA-30","created_at":"2025-12-23T17:19:36Z"}]}
{"id":"letta-opencode-plugin-7az","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:12:34.073045385Z","updated_at":"2025-12-24T02:12:34.073045385Z","comments":[{"id":178,"issue_id":"letta-opencode-plugin-7az","author":"node","text":"Synced from Beads: letta-opencode-plugin-j3p\n\n---\nHuly Issue: LETTA-107","created_at":"2025-12-24T02:12:34Z"}]}
{"id":"letta-opencode-plugin-7p6","title":"Matrix conversation archiving and review tooling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:30:24.111055407Z","updated_at":"2025-12-23T23:30:24.111055407Z","comments":[{"id":154,"issue_id":"letta-opencode-plugin-7p6","author":"node","text":"Synced from Beads: letta-opencode-plugin-v6m\n\n---\nHuly Issue: LETTA-81","created_at":"2025-12-23T23:30:24Z"}]}
{"id":"letta-opencode-plugin-7ue","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:43:00.495120555Z","updated_at":"2025-12-23T21:43:00.495120555Z","comments":[{"id":141,"issue_id":"letta-opencode-plugin-7ue","author":"node","text":"## Objective\n\nDevelop a message routing service that bridges Matrix room events to OpenCode task execution and vice versa, ensuring messages reach the correct participants and trigger appropriate actions.\n\n## Scope\n\n- Subscribe to Matrix room events for task rooms\n- Forward relevant messages to OpenCode execution instances\n- Relay OpenCode-generated updates (status, artifacts) back to Matrix room\n- Ensure messages are tagged with task metadata for routing\n\n## Acceptance Criteria\n\n- Matrix messages with  metadata are parsed and routed correctly\n- OpenCode status updates appear in Matrix room with proper formatting\n- Guidance requests are relayed to calling agent and responses returned to dev agent\n- Error handling and retries are implemented for message delivery failures\n\n## Notes\n\n- Coordinate with WorkspaceManager to update memory blocks\n- Ensure human participants receive relevant updates without control permissions\n- Use Matrix event IDs for tracking and deduplication\n\n---\nHuly Issue: LETTA-19","created_at":"2025-12-23T21:43:00Z"}]}
{"id":"letta-opencode-plugin-7yd","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:58:28.089499574Z","updated_at":"2025-12-24T02:58:28.089499574Z","comments":[{"id":198,"issue_id":"letta-opencode-plugin-7yd","author":"node","text":"Synced from Beads: letta-opencode-plugin-cb4\n\n---\nHuly Issue: LETTA-89","created_at":"2025-12-24T02:58:28Z"}]}
{"id":"letta-opencode-plugin-8ia","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T21:36:14.300166956Z","updated_at":"2025-12-23T21:36:14.300166956Z","comments":[{"id":137,"issue_id":"letta-opencode-plugin-8ia","author":"node","text":"Wire MCP send_task_control -\u003e OpenCode semantics. Map cancel to session.abort(), decide on pause/resume semantics (document behavior or emulate with container pause/unpause). Ensure workspace/matrix events reflect control outcomes.\n\nAcceptance Criteria:\n\n- cancel calls abort and tears down cleanly\n- pause/resume behavior documented (and implemented if feasible)\n- Workspace and Matrix reflect control changes\n\nOwners: @backend\nDue date: 2025-11-10\n\n---\nHuly Issue: LETTA-31","created_at":"2025-12-23T21:36:14Z"}]}
{"id":"letta-opencode-plugin-8kt","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:15:39.144317986Z","updated_at":"2025-12-23T22:15:39.144317986Z"}
{"id":"letta-opencode-plugin-8pe","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T22:22:46.803231437Z","updated_at":"2025-12-23T22:22:46.803231437Z","comments":[{"id":146,"issue_id":"letta-opencode-plugin-8pe","author":"node","text":"Wire MCP send_task_control -\u003e OpenCode semantics. Map cancel to session.abort(), decide on pause/resume semantics (document behavior or emulate with container pause/unpause). Ensure workspace/matrix events reflect control outcomes.\n\nAcceptance Criteria:\n\n- cancel calls abort and tears down cleanly\n- pause/resume behavior documented (and implemented if feasible)\n- Workspace and Matrix reflect control changes\n\nOwners: @backend\nDue date: 2025-11-10\n\n---\nHuly Issue: LETTA-31","created_at":"2025-12-23T22:22:47Z"}]}
{"id":"letta-opencode-plugin-91m","title":"Matrix task room manager service","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:35.536958452Z","updated_at":"2025-12-23T03:25:35.536958452Z","comments":[{"id":59,"issue_id":"letta-opencode-plugin-91m","author":"node","text":"## Objective\n\nCreate a Matrix room manager service responsible for lifecycle management of task-specific rooms, including creation, participant management, and teardown.\n\n## Scope\n\n- Define MatrixRoomManager interface\n- Implement room creation with task metadata (name, topic, tags)\n- Invite participants (calling agent, dev agent, optional human observers)\n- Manage room permissions (widget support, read-only observers)\n- Handle room closure and archival\n\n## Acceptance Criteria\n\n- Calling  creates Matrix room titled  with topic set to task description\n-  handles both agent IDs and human Matrix user IDs\n-  archives room and posts closing summary\n- Room metadata includes task ID, agent IDs, timestamps\n\n## Notes\n\n- Use  patterns for power levels\n- Ensure human observers default to read-only permissions\n- Store room metadata in workspace block for retrieval\n\n---\nHuly Issue: LETTA-17","created_at":"2025-12-23T03:25:35Z"}]}
{"id":"letta-opencode-plugin-9kg","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:29:31.143339558Z","updated_at":"2025-12-23T22:29:31.143339558Z","comments":[{"id":148,"issue_id":"letta-opencode-plugin-9kg","author":"node","text":"## Objective\n\nDevelop a message routing service that bridges Matrix room events to OpenCode task execution and vice versa, ensuring messages reach the correct participants and trigger appropriate actions.\n\n## Scope\n\n- Subscribe to Matrix room events for task rooms\n- Forward relevant messages to OpenCode execution instances\n- Relay OpenCode-generated updates (status, artifacts) back to Matrix room\n- Ensure messages are tagged with task metadata for routing\n\n## Acceptance Criteria\n\n- Matrix messages with  metadata are parsed and routed correctly\n- OpenCode status updates appear in Matrix room with proper formatting\n- Guidance requests are relayed to calling agent and responses returned to dev agent\n- Error handling and retries are implemented for message delivery failures\n\n## Notes\n\n- Coordinate with WorkspaceManager to update memory blocks\n- Ensure human participants receive relevant updates without control permissions\n- Use Matrix event IDs for tracking and deduplication\n\n---\nHuly Issue: LETTA-19","created_at":"2025-12-23T22:29:31Z"}]}
{"id":"letta-opencode-plugin-9ps","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:53:47.048696322Z","updated_at":"2025-12-24T02:53:47.048696322Z","comments":[{"id":196,"issue_id":"letta-opencode-plugin-9ps","author":"node","text":"Synced from Beads: letta-opencode-plugin-okp\n\n---\nHuly Issue: LETTA-91","created_at":"2025-12-24T02:53:47Z"}]}
{"id":"letta-opencode-plugin-9zg","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:08:55.850751391Z","updated_at":"2025-12-24T02:08:55.850751391Z","comments":[{"id":176,"issue_id":"letta-opencode-plugin-9zg","author":"node","text":"Synced from Beads: letta-opencode-plugin-u6z\n\n---\nHuly Issue: LETTA-109","created_at":"2025-12-24T02:08:56Z"}]}
{"id":"letta-opencode-plugin-a1v","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T00:05:49.311406605Z","updated_at":"2025-12-24T00:05:49.311406605Z","comments":[{"id":170,"issue_id":"letta-opencode-plugin-a1v","author":"node","text":"Synced from Beads: letta-opencode-plugin-mq3\n\n---\nHuly Issue: LETTA-65","created_at":"2025-12-24T00:05:49Z"}]}
{"id":"letta-opencode-plugin-a98","title":"Matrix-based multi-agent coordination via Synapse","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.29548636Z","updated_at":"2025-12-22T23:47:00.29548636Z","comments":[{"id":14,"issue_id":"letta-opencode-plugin-a98","author":"node","text":"## Objective\n\nImplement Matrix (Synapse) as a coordination layer between Letta calling agents and OpenCode execution agents, enabling bidirectional communication, human-in-the-loop participation, and conversation archiving.\n\n## Scope\n\n- Create Matrix rooms per OpenCode task with automatic participant management\n- Route messages between Letta agents, OpenCode dev agents, and human observers\n- Support task control signals (cancel, pause/resume) and runtime updates\n- Archive conversations for later review and learning\n\n## Success Criteria\n\n- New Matrix integration architecture documented\n- End-to-end task flow demonstrated: task creation → Matrix room → bidirectional messaging → archival\n- Human observer can join task room and provide feedback\n\n## Deliverables\n\n1. Architecture \u0026 configuration docs\n2. Matrix coordination services (room manager, message router, communication layer)\n3. Integration tests covering agent ↔ dev ↔ human loop\n\n## Dependencies\n\n- LETTA-9 through LETTA-14 (MCP server core) – completed\n- LETTA-10 (Letta client adapter) – completed\n\n## Out of Scope\n\n- External federation across organizations\n- Advanced analytics/learning from conversations\n\n---\nHuly Issue: LETTA-15","created_at":"2025-12-22T23:47:00Z"}]}
{"id":"letta-opencode-plugin-aht","title":"Task cancellation, pause, and resume support","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:34.11005195Z","updated_at":"2025-12-23T03:25:34.11005195Z","comments":[{"id":56,"issue_id":"letta-opencode-plugin-aht","author":"node","text":"## Objective\n\nAdd task control capabilities (cancel, pause, resume) to the Letta OpenCode Plugin and ensure they are triggered via Matrix commands.\n\n## Scope\n\n- Extend ExecutionManager to support pause/resume signals\n- Implement safe cancellation that stops Docker container execution\n- Connect Matrix control messages to task control actions\n- Update workspace blocks with control status changes\n\n## Acceptance Criteria\n\n- Sending  command in Matrix immediately stops task execution and updates status\n- Pause/resume commands suspend and resume container execution with logging\n- Workspace block events reflect control actions with timestamps\n- Automated tests cover control flows and error cases (e.g., pause before start)\n\n## Notes\n\n- Coordinate with TaskRegistry for status tracking\n- Consider Docker pause/unpause for container control\n- Ensure idempotent control actions (no double cancellation)\n\n---\nHuly Issue: LETTA-21","created_at":"2025-12-23T03:25:34Z"}]}
{"id":"letta-opencode-plugin-ana","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T17:53:27.826422472Z","updated_at":"2025-12-23T23:41:13.890027664Z","comments":[{"id":82,"issue_id":"letta-opencode-plugin-ana","author":"node","text":"## Objective\n\nEnable Letta calling agents (and human participants) to provide runtime updates and feedback to OpenCode tasks, supporting iterative correction and refinement.\n\n## Scope\n\n- Extend WorkspaceManager to track runtime updates and feedback events\n- Implement Matrix message handling for runtime updates (requirement changes) and feedback requests\n- Notify OpenCode dev agent of new updates and track acknowledgements\n- Provide API for dev agent to request clarification or confirm updates\n\n## Acceptance Criteria\n\n- Runtime updates appear in workspace block metadata and Matrix room with context\n- Dev agent receives updates and confirms receipt (logged in Matrix)\n- Feedback loop supports: request review → provide corrections → confirmation\n- Tests cover scenarios: new requirements mid-task, versioning of updates, human feedback\n\n## Notes\n\n- Ensure updates do not overwrite existing metadata (merge strategy)\n- Provide clear logging for update history for auditing\n- Coordinate with message router for consistent event tagging\n\n---\nHuly Issue: LETTA-22","created_at":"2025-12-23T17:53:28Z"}]}
{"id":"letta-opencode-plugin-ay9","title":"Evaluate and reuse opencode-mcp-tool repo for MCP server scaffolding","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:25.890521843Z","updated_at":"2025-12-23T03:25:25.890521843Z","comments":[{"id":41,"issue_id":"letta-opencode-plugin-ay9","author":"node","text":"## Objective\n\nReview the archived repo https://github.com/frap129/opencode-mcp-tool and decide what to reuse for our MCP-only OpenCode appendage server.\n\n## Findings (initial)\n\n- Uses @modelcontextprotocol/sdk v0.5.0 (outdated) and StdioServerTransport only\n- Provides MCP server skeleton with tools registry, prompts, progress notifications/keepalive\n- Tools implemented: ask-opencode, brainstorm, timeout-test, ping, help, slash commands\n- Executes OpenCode via local CLI (no containerization, no Letta integration)\n- No auth, idempotency, queuing, or workspace block concepts\n- MIT licensed (compatible for reuse)\n\n## Reuse Plan\n\n- Reuse: tool registry pattern, progress notification keepalive loop, CLI execution wrapper abstraction\n- Replace: transport with Streamable HTTP, SDK ^1.16.0, tool set with our  +  tools\n- Add: Letta API client, Execution Manager (container spawn/limits), idempotency/queue, optimistic concurrency on workspace blocks\n\n## Deliverables\n\n1. Delta design doc (what to keep, what to change)\n2. Migration tasks list (SDK upgrade, transport switch, new tools, remove legacy tools)\n3. Spike PR to port skeleton and boot a streamable HTTP MCP server\n\n## Acceptance Criteria\n\n- Documented decision (reuse vs fresh)\n- If reuse: working HTTP MCP server boots with health log\n- Clear task breakdown for upgrade path\n\n---\nHuly Issue: LETTA-7","created_at":"2025-12-23T03:25:26Z"}]}
{"id":"letta-opencode-plugin-b0d","title":"Add pagination to get_task_history tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:26:52.40709814Z","updated_at":"2025-12-23T18:26:52.40709814Z","comments":[{"id":100,"issue_id":"letta-opencode-plugin-b0d","author":"node","text":"## Issue\n\nThe  tool returns ALL events, which could be thousands for long-running tasks.\n\n### Required Implementation\n\nAdd pagination parameters:\n\n\n\nReturn paginated response with metadata.\n\n### Files to Update\n\n-  - Add pagination logic\n-  - Update tool schema\n\n### Acceptance Criteria\n\n- [ ] Default limit of 100 events\n- [ ] Returns pagination metadata\n- [ ] Backwards compatible (limit=-1 returns all)\n- [ ] Tested with 500+ event tasks\n\n---\nHuly Issue: LETTA-39","created_at":"2025-12-23T18:26:52Z"}]}
{"id":"letta-opencode-plugin-b2n","title":"Fix tool approval disabling for ephemeral workers in MCP bridge","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:45.296341692Z","updated_at":"2025-12-22T23:47:01.340024419Z","comments":[{"id":3,"issue_id":"letta-opencode-plugin-b2n","author":"node","text":"## Problem\n\nThe MCP bridge (http-wrapper-v3-fixed.js) attempts to disable tool approval requirements for ephemeral worker agents, but the approval is still being enforced during execution.\n\n## Current Behavior\n\n- Code successfully calls PATCH  with \n- Logs show \"✓ Disabled approval for tool {name}\" for all 6 filesystem tools (Read, Write, Edit, Glob, Grep, LS)\n- Despite this, tools still require approval when worker executes tasks\n- Main agent shows  with  for all tools\n\n## Expected Behavior\n\nEphemeral worker agents should execute filesystem tools autonomously without human-in-the-loop approval prompts.\n\n## Technical Details\n\n- **File**: \n- **Lines**: 263-291 (approval disabling logic)\n- **API Endpoint**:  (PATCH)\n- **Tool ID Mapping**:  populated at startup (line 149)\n\n## Investigation Needed\n\n1. Verify API response indicates success\n2. Check if tool_rules persist after PATCH call\n3. Determine if there's a delay/caching issue\n4. Test if approval needs to be disabled before or after tool attachment\n\n## Related Files\n\n-  (lines 263-291)\n-  (execution logs)\n\n---\nHuly Issue: LETTA-43","created_at":"2025-12-22T23:40:45Z"}]}
{"id":"letta-opencode-plugin-ben","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:31:56.13043829Z","updated_at":"2025-12-23T18:31:56.13043829Z","comments":[{"id":102,"issue_id":"letta-opencode-plugin-ben","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T18:31:56Z"}]}
{"id":"letta-opencode-plugin-bge","title":"Add @opencode-ai/sdk client and OpencodeClientManager","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:45.591367654Z","updated_at":"2025-12-22T23:47:01.643401335Z","comments":[{"id":5,"issue_id":"letta-opencode-plugin-bge","author":"node","text":"Introduce @opencode-ai/sdk as a dependency and create an OpencodeClientManager for lifecycle management (connect, wait for server, reuse per-task, teardown). Provide methods: createClient(taskId, serverUrl), getClient(taskId), destroyClient(taskId).\n\nAcceptance Criteria:\n\n- SDK installed and pinned\n- ClientManager implemented with health checks and retries\n- Unit tests for connect/disconnect\n\nOwners: @backend\nDue date: 2025-10-28\n\n---\nHuly Issue: LETTA-27","created_at":"2025-12-22T23:40:45Z"}]}
{"id":"letta-opencode-plugin-bl0","title":"Research Letta TypeScript SDK capabilities and API patterns","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:24:36.297907338Z","updated_at":"2025-12-23T18:24:36.297907338Z","comments":[{"id":98,"issue_id":"letta-opencode-plugin-bl0","author":"node","text":"## Objective\n\nConduct comprehensive research on the Letta TypeScript SDK to understand its full capabilities, API patterns, and integration requirements for building an OpenCode plugin.\n\n## Research Areas\n\n### 1. SDK Client Initialization\n\n- Client setup for local server (http://localhost:8283)\n- Client setup for Letta Cloud (token + project authentication)\n- Configuration options and environment variables\n- Connection management and error handling\n\n### 2. Agent Management\n\n- Agent creation and configuration\n- Agent lifecycle operations (list, get, update, delete)\n- Agent state management\n- Tool attachment to agents\n\n### 3. Memory Operations\n\n- Core memory structure and management\n- Memory blocks (create, read, update, delete)\n- Archival memory operations\n- Memory persistence patterns\n\n### 4. Tool Management\n\n- Tool registration and discovery\n- MCP server tool integration\n- Tool execution and coordination\n- Custom tool creation\n\n### 5. Message Operations\n\n- Sending messages to agents\n- Message history retrieval\n- Streaming responses\n- Message formatting and context\n\n### 6. API Patterns\n\n- REST API endpoint structure\n- Request/response formats\n- Error handling conventions\n- Rate limiting and pagination\n\n## Documentation Sources\n\n- npm package: @letta-ai/letta-client\n- Letta API documentation (REST API reference)\n- Python SDK for comparison (letta-client)\n- Existing MCP integrations (letta-tools server)\n\n## Deliverables\n\n1. Comprehensive SDK capability matrix\n2. API endpoint documentation\n3. Authentication and configuration patterns\n4. Integration architecture design\n5. Tool interface specifications\n6. Example code snippets and patterns\n\n## Success Criteria\n\n- Complete understanding of SDK capabilities\n- Clear integration strategy defined\n- Technical architecture documented\n- Ready to begin implementation phase\n\n---\nHuly Issue: LETTA-1","created_at":"2025-12-23T18:24:36Z"}]}
{"id":"letta-opencode-plugin-bpr","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T02:27:36.724327697Z","updated_at":"2025-12-24T02:27:36.724327697Z","comments":[{"id":185,"issue_id":"letta-opencode-plugin-bpr","author":"node","text":"Synced from Beads: letta-opencode-plugin-mz2\n\n---\nHuly Issue: LETTA-101","created_at":"2025-12-24T02:27:36Z"}]}
{"id":"letta-opencode-plugin-c24","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:38:26.19044838Z","updated_at":"2025-12-24T02:38:26.19044838Z","comments":[{"id":189,"issue_id":"letta-opencode-plugin-c24","author":"node","text":"Synced from Beads: letta-opencode-plugin-b5w\n\n---\nHuly Issue: LETTA-96","created_at":"2025-12-24T02:38:26Z"}]}
{"id":"letta-opencode-plugin-c7b","title":"Matrix conversation archiving and review tooling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:05:21.287971118Z","updated_at":"2025-12-24T02:05:21.287971118Z","comments":[{"id":174,"issue_id":"letta-opencode-plugin-c7b","author":"node","text":"Synced from Beads: letta-opencode-plugin-cix\n\n---\nHuly Issue: LETTA-110","created_at":"2025-12-24T02:05:21Z"}]}
{"id":"letta-opencode-plugin-cgc","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:23:51.579056634Z","updated_at":"2025-12-23T20:23:51.579056634Z"}
{"id":"letta-opencode-plugin-cip","title":"MCP tools: opencode_execute_task (async/sync) with idempotency + queue","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:35.288958907Z","updated_at":"2025-12-23T03:25:35.288958907Z"}
{"id":"letta-opencode-plugin-cls","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:57:38.331585666Z","updated_at":"2025-12-23T23:57:38.331585666Z","comments":[{"id":166,"issue_id":"letta-opencode-plugin-cls","author":"node","text":"Synced from Beads: letta-opencode-plugin-f4v\n\n---\nHuly Issue: LETTA-69","created_at":"2025-12-23T23:57:38Z"}]}
{"id":"letta-opencode-plugin-cna","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T22:19:24.586223143Z","updated_at":"2025-12-23T22:19:24.586223143Z","comments":[{"id":145,"issue_id":"letta-opencode-plugin-cna","author":"node","text":"Add integration tests that spin up an OpenCode server container, run a session, stream events, read files, and verify workspace/matrix updates. Include timeout and cancel flows. Gate CI on these.\n\nAcceptance Criteria:\n\n- Test suite covers happy path, errors, timeout, cancel\n- CI runs tests in isolated environment with Docker\n- Flakiness under 1%\n\nOwners: @backend @qa\nDue date: 2025-12-05\n\n---\nHuly Issue: LETTA-34","created_at":"2025-12-23T22:19:24Z"}]}
{"id":"letta-opencode-plugin-cu8","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:11:35.76258937Z","updated_at":"2025-12-23T18:11:35.76258937Z","comments":[{"id":91,"issue_id":"letta-opencode-plugin-cu8","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T18:11:35Z"}]}
{"id":"letta-opencode-plugin-d1k","title":"Fix unused parameter warnings in letta-client.ts","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.051474081Z","updated_at":"2025-12-22T23:47:00.051474081Z","comments":[{"id":12,"issue_id":"letta-opencode-plugin-d1k","author":"node","text":"## Code Quality Issue\n\nTypeScript hints indicate unused  parameters:\n\n- letta-client.ts:70:5\n- letta-client.ts:87:5\n\n### Investigation Needed\n\nReview if  is truly unused in  and  methods, or if it should be used for logging/validation.\n\n### Files to Review\n\n-  - createMemoryBlock\n-  - updateMemoryBlock\n\n### Acceptance Criteria\n\n- [ ] No TypeScript warnings\n- [ ] Verify correct API usage per Letta SDK docs\n- [ ] Tests pass\n\n---\nHuly Issue: LETTA-40","created_at":"2025-12-22T23:47:00Z"}]}
{"id":"letta-opencode-plugin-d7x","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:20:32.231537838Z","updated_at":"2025-12-23T20:20:32.231537838Z","comments":[{"id":124,"issue_id":"letta-opencode-plugin-d7x","author":"node","text":"Objective: Migrate Letta OpenCode Plugin from invoking Claude CLI directly to integrating with the OpenCode headless HTTP server (opencode serve) using the official @opencode-ai/sdk.\n\nWhy:\n\n- Structured API for sessions, messages, files\n- Real-time event streaming via /event\n- Better control (abort, observe, permissions)\n- File/status access and richer results\n\nScope:\n\n- Build/run OpenCode server in Docker per task\n- Connect via @opencode-ai/sdk client\n- Create/manage sessions, send prompts, stream events\n- Map events to Workspace blocks and Matrix\n- Expose file tools to agents (list/read)\n- Maintain current tool surface and memory lifecycle\n- Backward-compat flag and rollout plan\n\nDone when:\n\n- All existing tools continue to work\n- New file access tools available\n- Event stream updates arrive in Workspace\n- Control signals (cancel) mapped to abort\n- Tests pass and deployment stable\n\n---\nHuly Issue: LETTA-25","created_at":"2025-12-23T20:20:32Z"}]}
{"id":"letta-opencode-plugin-ddx","title":"Matrix client integration for Letta OpenCode Plugin","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:42:59.604083128Z","updated_at":"2025-12-23T23:42:59.604083128Z","comments":[{"id":157,"issue_id":"letta-opencode-plugin-ddx","author":"node","text":"Synced from Beads: letta-opencode-plugin-463\n\n---\nHuly Issue: LETTA-76","created_at":"2025-12-23T23:42:59Z"}]}
{"id":"letta-opencode-plugin-djx","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T19:55:51.50590739Z","updated_at":"2025-12-23T19:55:51.50590739Z","comments":[{"id":116,"issue_id":"letta-opencode-plugin-djx","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T19:55:51Z"}]}
{"id":"letta-opencode-plugin-do0","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:46:35.065603532Z","updated_at":"2025-12-23T23:46:35.065603532Z","comments":[{"id":160,"issue_id":"letta-opencode-plugin-do0","author":"node","text":"Synced from Beads: letta-opencode-plugin-p40\n\n---\nHuly Issue: LETTA-74","created_at":"2025-12-23T23:46:35Z"}]}
{"id":"letta-opencode-plugin-dqf","title":"MCP Server MVP: OpenCode Appendage for Letta (Epic)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:23:34.201852645Z","updated_at":"2025-12-24T02:23:34.201852645Z","comments":[{"id":183,"issue_id":"letta-opencode-plugin-dqf","author":"node","text":"Synced from Beads: letta-opencode-plugin-o60\n\n---\nHuly Issue: LETTA-102","created_at":"2025-12-24T02:23:34Z"}]}
{"id":"letta-opencode-plugin-dsg","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:41:17.038031237Z","updated_at":"2025-12-23T21:41:17.038031237Z","comments":[{"id":140,"issue_id":"letta-opencode-plugin-dsg","author":"node","text":"## Objective\n\nDevelop a message routing service that bridges Matrix room events to OpenCode task execution and vice versa, ensuring messages reach the correct participants and trigger appropriate actions.\n\n## Scope\n\n- Subscribe to Matrix room events for task rooms\n- Forward relevant messages to OpenCode execution instances\n- Relay OpenCode-generated updates (status, artifacts) back to Matrix room\n- Ensure messages are tagged with task metadata for routing\n\n## Acceptance Criteria\n\n- Matrix messages with  metadata are parsed and routed correctly\n- OpenCode status updates appear in Matrix room with proper formatting\n- Guidance requests are relayed to calling agent and responses returned to dev agent\n- Error handling and retries are implemented for message delivery failures\n\n## Notes\n\n- Coordinate with WorkspaceManager to update memory blocks\n- Ensure human participants receive relevant updates without control permissions\n- Use Matrix event IDs for tracking and deduplication\n\n---\nHuly Issue: LETTA-19","created_at":"2025-12-23T21:41:17Z"}]}
{"id":"letta-opencode-plugin-dso","title":"Add file size validation to read_task_file tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:14:18.336323253Z","updated_at":"2025-12-24T03:14:18.336323253Z","comments":[{"id":204,"issue_id":"letta-opencode-plugin-dso","author":"node","text":"Synced from Beads: letta-opencode-plugin-3yv\n\n---\nHuly Issue: LETTA-84","created_at":"2025-12-24T03:14:18Z"}]}
{"id":"letta-opencode-plugin-e84","title":"Fix tool approval disabling for ephemeral workers in MCP bridge","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T03:25:27.862296734Z","updated_at":"2025-12-23T03:25:27.862296734Z","comments":[{"id":43,"issue_id":"letta-opencode-plugin-e84","author":"node","text":"## Problem\n\nThe MCP bridge (http-wrapper-v3-fixed.js) attempts to disable tool approval requirements for ephemeral worker agents, but the approval is still being enforced during execution.\n\n## Current Behavior\n\n- Code successfully calls PATCH  with \n- Logs show \"✓ Disabled approval for tool {name}\" for all 6 filesystem tools (Read, Write, Edit, Glob, Grep, LS)\n- Despite this, tools still require approval when worker executes tasks\n- Main agent shows  with  for all tools\n\n## Expected Behavior\n\nEphemeral worker agents should execute filesystem tools autonomously without human-in-the-loop approval prompts.\n\n## Technical Details\n\n- **File**: \n- **Lines**: 263-291 (approval disabling logic)\n- **API Endpoint**:  (PATCH)\n- **Tool ID Mapping**:  populated at startup (line 149)\n\n## Investigation Needed\n\n1. Verify API response indicates success\n2. Check if tool_rules persist after PATCH call\n3. Determine if there's a delay/caching issue\n4. Test if approval needs to be disabled before or after tool attachment\n\n## Related Files\n\n-  (lines 263-291)\n-  (execution logs)\n\n---\nHuly Issue: LETTA-43","created_at":"2025-12-23T03:25:28Z"}]}
{"id":"letta-opencode-plugin-e95","title":"Backward compatibility flag and rollout (blue/green)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.369503579Z","updated_at":"2025-12-22T23:47:02.369503579Z","comments":[{"id":26,"issue_id":"letta-opencode-plugin-e95","author":"node","text":"Introduce feature flag to toggle CLI vs OpenCode server (OPENCODE_SERVER_ENABLED). Implement blue/green rollout: deploy side by side, route small traffic, monitor, ramp to 100%, rollback path documented.\n\nAcceptance Criteria:\n\n- Feature flag wired into ExecutionManager path\n- Blue/green rollout documented and trialed\n- Rollback tested\n\nOwners: @platform\nDue date: 2025-11-12\n\n---\nHuly Issue: LETTA-33","created_at":"2025-12-22T23:47:02Z"}]}
{"id":"letta-opencode-plugin-e9g","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:54:35.620021471Z","updated_at":"2025-12-23T21:54:35.620021471Z"}
{"id":"letta-opencode-plugin-eda","title":"Implement bidirectional communication via memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:56:07.084415335Z","updated_at":"2025-12-24T02:56:07.084415335Z","comments":[{"id":197,"issue_id":"letta-opencode-plugin-eda","author":"node","text":"Synced from Beads: letta-opencode-plugin-pw9\n\n---\nHuly Issue: LETTA-90","created_at":"2025-12-24T02:56:07Z"}]}
{"id":"letta-opencode-plugin-ee9","title":"Design ExecutionManager refactor to use OpenCode HTTP API","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T03:25:28.700224235Z","updated_at":"2025-12-23T03:25:28.700224235Z","comments":[{"id":45,"issue_id":"letta-opencode-plugin-ee9","author":"node","text":"Refactor ExecutionManager to start an OpenCode server container (opencode serve) per task and connect via @opencode-ai/sdk. Implement session creation, prompt sending, event streaming, and graceful shutdown.\n\nAcceptance Criteria:\n\n- Container starts with opencode serve exposed\n- SDK client connects and creates a session\n- Prompt is sent and responses handled\n- Events streamed to WorkspaceManager\n- Cancel maps to session.abort()\n- Pause/resume placeholder behavior documented\n\nOwners: @backend @platform\nDue date: 2025-11-01\n\n---\nHuly Issue: LETTA-26","created_at":"2025-12-23T03:25:28Z"}]}
{"id":"letta-opencode-plugin-ejz","title":"Human-in-the-loop participation via Matrix","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:29.958407952Z","updated_at":"2025-12-23T03:25:29.958407952Z","comments":[{"id":48,"issue_id":"letta-opencode-plugin-ejz","author":"node","text":"## Objective\n\nEnable optional human participation in OpenCode task rooms, allowing human PMs or experts to observe, intervene, and provide feedback through Matrix.\n\n## Scope\n\n- Add configuration for default human observers per task\n- Ensure human observers are invited with read-only permissions by default\n- Provide commands/actions for humans to escalate (e.g., request changes, halt execution)\n- Document human participation workflow\n\n## Acceptance Criteria\n\n- Human user receives invitation when enabled in configuration\n- Human messages are routed to both Letta calling agent and OpenCode dev agent\n- Human can trigger task cancellation or request changes via Matrix command\n- Documentation covers how humans join and interact with task rooms\n\n## Notes\n\n- Coordinate with permissions helper for power levels\n- Ensure logging for human interventions for auditing\n- Provide optional manual invitation command for ad-hoc observers\n\n---\nHuly Issue: LETTA-20","created_at":"2025-12-23T03:25:30Z"}]}
{"id":"letta-opencode-plugin-g16","title":"Container lifecycle management for OpenCode server","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T18:09:22.493338194Z","updated_at":"2025-12-23T18:09:22.493338194Z","comments":[{"id":88,"issue_id":"letta-opencode-plugin-g16","author":"node","text":"Start OpenCode server in detached mode per task, allocate dynamic ports, detect server readiness, health checks, and cleanup (kill, remove). Handle container IP/URL discovery for client connection. Add logging and error handling.\n\nAcceptance Criteria:\n\n- Container start/stop reliable across 100 runs\n- Server readiness detection under 5s median\n- Healthcheck endpoint monitored\n- Errors logged with containerId and taskId\n\nOwners: @platform\nDue date: 2025-10-30\n\n---\nHuly Issue: LETTA-30","created_at":"2025-12-23T18:09:22Z"}]}
{"id":"letta-opencode-plugin-g84","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T02:10:42.64263716Z","updated_at":"2025-12-24T02:10:42.64263716Z","comments":[{"id":177,"issue_id":"letta-opencode-plugin-g84","author":"node","text":"Synced from Beads: letta-opencode-plugin-56t\n\n---\nHuly Issue: LETTA-108","created_at":"2025-12-24T02:10:42Z"}]}
{"id":"letta-opencode-plugin-gje","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T23:55:57.023791192Z","updated_at":"2025-12-23T23:55:57.023791192Z","comments":[{"id":165,"issue_id":"letta-opencode-plugin-gje","author":"node","text":"Synced from Beads: letta-opencode-plugin-dg7\n\n---\nHuly Issue: LETTA-70","created_at":"2025-12-23T23:55:57Z"}]}
{"id":"letta-opencode-plugin-gkt","title":"Execution Manager: container spawn/limits/timeouts/log tail","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:27.053257869Z","updated_at":"2025-12-23T03:25:27.053257869Z"}
{"id":"letta-opencode-plugin-hje","title":"Add description field to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.029490805Z","updated_at":"2025-12-22T23:47:02.029490805Z","comments":[{"id":24,"issue_id":"letta-opencode-plugin-hje","author":"node","text":"## Critical Issue\n\nPer Letta documentation review (docs/IMPLEMENTATION_REVIEW.md), workspace memory blocks are missing the critical  field.\n\n### Current Implementation\n\n\n\n### Why This Matters\n\nFrom Letta docs:\n\n\u003e \"The description is the main information used by the agent to determine how to read and write to that block. Without a good description, the agent may not understand how to use the block.\"\n\nWithout this field, agents don't understand:\n\n- What the block contains\n- How to interpret the JSON structure\n- When to check the block\n- What fields are important\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add description parameter\n-  - Update CreateMemoryBlockRequest interface\n\n### Acceptance Criteria\n\n- [ ] Description field added to all workspace block creation calls\n- [ ] Type definitions updated to include description\n- [ ] Description clearly explains workspace block structure and usage\n- [ ] Tested with Letta agent to verify understanding\n\n---\nHuly Issue: LETTA-35","created_at":"2025-12-22T23:47:02Z"}]}
{"id":"letta-opencode-plugin-hmm","title":"Workspace block schema + optimistic concurrency helpers","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.792909031Z","updated_at":"2025-12-22T23:47:01.792909031Z"}
{"id":"letta-opencode-plugin-im4","title":"Increase default MAX_CONCURRENT_TASKS from 3 to 10","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:56:40.290581694Z","updated_at":"2025-12-23T20:56:40.290581694Z","comments":[{"id":130,"issue_id":"letta-opencode-plugin-im4","author":"node","text":"Synced from Beads: letta-opencode-plugin-2jg\n\n---\nHuly Issue: LETTA-64","created_at":"2025-12-23T20:56:40Z"}]}
{"id":"letta-opencode-plugin-j0t","title":"Container lifecycle management for OpenCode server","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T00:07:40.098688542Z","updated_at":"2025-12-24T00:07:40.098688542Z","comments":[{"id":172,"issue_id":"letta-opencode-plugin-j0t","author":"node","text":"Synced from Beads: letta-opencode-plugin-7a2\n\n---\nHuly Issue: LETTA-65","created_at":"2025-12-24T00:07:40Z"}]}
{"id":"letta-opencode-plugin-j86","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T23:52:20.86848148Z","updated_at":"2025-12-23T23:52:20.86848148Z","comments":[{"id":163,"issue_id":"letta-opencode-plugin-j86","author":"node","text":"Synced from Beads: letta-opencode-plugin-rje\n\n---\nHuly Issue: LETTA-72","created_at":"2025-12-23T23:52:21Z"}]}
{"id":"letta-opencode-plugin-j9q","title":"Letta client adapter: agents/memory/messages with retries \u0026 409 handling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:21:14.552291676Z","updated_at":"2025-12-23T18:21:14.552291676Z"}
{"id":"letta-opencode-plugin-k1z","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:37:43.47841377Z","updated_at":"2025-12-23T20:37:43.47841377Z","comments":[{"id":129,"issue_id":"letta-opencode-plugin-k1z","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T20:37:43Z"}]}
{"id":"letta-opencode-plugin-k6c","title":"Fix unused parameter warnings in letta-client.ts","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:22.458447162Z","updated_at":"2025-12-23T03:25:22.458447162Z","comments":[{"id":33,"issue_id":"letta-opencode-plugin-k6c","author":"node","text":"## Code Quality Issue\n\nTypeScript hints indicate unused  parameters:\n\n- letta-client.ts:70:5\n- letta-client.ts:87:5\n\n### Investigation Needed\n\nReview if  is truly unused in  and  methods, or if it should be used for logging/validation.\n\n### Files to Review\n\n-  - createMemoryBlock\n-  - updateMemoryBlock\n\n### Acceptance Criteria\n\n- [ ] No TypeScript warnings\n- [ ] Verify correct API usage per Letta SDK docs\n- [ ] Tests pass\n\n---\nHuly Issue: LETTA-40","created_at":"2025-12-23T03:25:22Z"}]}
{"id":"letta-opencode-plugin-kan","title":"Matrix conversation archiving and review tooling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:30:24.49876095Z","updated_at":"2025-12-23T23:30:24.49876095Z","comments":[{"id":155,"issue_id":"letta-opencode-plugin-kan","author":"node","text":"Synced from Beads: letta-opencode-plugin-v6m\n\n---\nHuly Issue: LETTA-81","created_at":"2025-12-23T23:30:24Z"}]}
{"id":"letta-opencode-plugin-kbc","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:29:53.654360951Z","updated_at":"2025-12-23T21:29:53.654360951Z","comments":[{"id":132,"issue_id":"letta-opencode-plugin-kbc","author":"node","text":"Objective: Migrate Letta OpenCode Plugin from invoking Claude CLI directly to integrating with the OpenCode headless HTTP server (opencode serve) using the official @opencode-ai/sdk.\n\nWhy:\n\n- Structured API for sessions, messages, files\n- Real-time event streaming via /event\n- Better control (abort, observe, permissions)\n- File/status access and richer results\n\nScope:\n\n- Build/run OpenCode server in Docker per task\n- Connect via @opencode-ai/sdk client\n- Create/manage sessions, send prompts, stream events\n- Map events to Workspace blocks and Matrix\n- Expose file tools to agents (list/read)\n- Maintain current tool surface and memory lifecycle\n- Backward-compat flag and rollout plan\n\nDone when:\n\n- All existing tools continue to work\n- New file access tools available\n- Event stream updates arrive in Workspace\n- Control signals (cancel) mapped to abort\n- Tests pass and deployment stable\n\n---\nHuly Issue: LETTA-25","created_at":"2025-12-23T21:29:53Z"}]}
{"id":"letta-opencode-plugin-kbh","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:53:01.196492128Z","updated_at":"2025-12-23T21:53:01.196492128Z"}
{"id":"letta-opencode-plugin-kbn","title":"Bidirectional communication layer (cancel/pause/resume/updates)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.7049165Z","updated_at":"2025-12-22T23:47:00.7049165Z","comments":[{"id":17,"issue_id":"letta-opencode-plugin-kbn","author":"node","text":"## Objective\n\nImplement a communication layer supporting bidirectional signals between Letta agents and OpenCode tasks via Matrix, covering cancellation, pause/resume, runtime updates, and feedback loops.\n\n## Scope\n\n- Define CommunicationLayer interface\n- Implement task control signals: cancel, pause, resume\n- Add runtime update mechanism for injecting new context mid-execution\n- Support feedback loop where agent reviews artifacts and requests changes\n\n## Acceptance Criteria\n\n- Sending Matrix control message updates task status (cancel/pause/resume)\n- Runtime updates modify workspace block metadata and notify execution\n- Feedback messages tracked and acknowledged by dev agent\n- Unit tests simulate control signals and ensure proper propagation\n\n## Notes\n\n- Use Matrix message types described in design doc\n- Ensure resilience (e.g., retry on delivery failures)\n- Integrate with ExecutionManager to handle pause/resume commands\n\n---\nHuly Issue: LETTA-18","created_at":"2025-12-22T23:47:00Z"}]}
{"id":"letta-opencode-plugin-koz","title":"Increase default MAX_CONCURRENT_TASKS from 3 to 10","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T17:45:15.74683397Z","updated_at":"2025-12-23T17:45:15.74683397Z","comments":[{"id":78,"issue_id":"letta-opencode-plugin-koz","author":"node","text":"## Configuration Improvement\n\nCurrent max of 3 concurrent tasks is too conservative for production use.\n\n### Recommended Change\n\n\n\n### Justification\n\n- Modern hardware can handle 10+ Docker containers\n- Each container has resource limits (2 CPU, 2g RAM)\n- Current limit causes frequent 429 errors\n\n### Files to Update\n\n-  - Change default \"3\" to \"10\"\n-  - Update documentation\n\n### Acceptance Criteria\n\n- [ ] Default increased to 10\n- [ ] Still configurable via env var\n- [ ] Load tested with 10+ tasks\n- [ ] No resource exhaustion\n\n---\nHuly Issue: LETTA-41","created_at":"2025-12-23T17:45:15Z"}]}
{"id":"letta-opencode-plugin-lw3","title":"Backward compatibility flag and rollout (blue/green)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:32.749814373Z","updated_at":"2025-12-23T03:25:32.749814373Z","comments":[{"id":53,"issue_id":"letta-opencode-plugin-lw3","author":"node","text":"Introduce feature flag to toggle CLI vs OpenCode server (OPENCODE_SERVER_ENABLED). Implement blue/green rollout: deploy side by side, route small traffic, monitor, ramp to 100%, rollback path documented.\n\nAcceptance Criteria:\n\n- Feature flag wired into ExecutionManager path\n- Blue/green rollout documented and trialed\n- Rollback tested\n\nOwners: @platform\nDue date: 2025-11-12\n\n---\nHuly Issue: LETTA-33","created_at":"2025-12-23T03:25:32Z"}]}
{"id":"letta-opencode-plugin-m56","title":"Add character limits to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.198671347Z","updated_at":"2025-12-22T23:47:00.198671347Z","comments":[{"id":13,"issue_id":"letta-opencode-plugin-m56","author":"node","text":"## Critical Issue\n\nWorkspace memory blocks are created without character limits, risking context window overflow.\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add limit parameter\n-  - Add size validation\n-  - Add WORKSPACE_BLOCK_LIMIT variable\n\n### Acceptance Criteria\n\n- [ ] All workspace blocks created with character limit\n- [ ] Limit configurable via environment variable (default 50000)\n- [ ] Size validation before updates\n- [ ] Works with event pruning (LETTA-36)\n\n---\nHuly Issue: LETTA-37","created_at":"2025-12-22T23:47:00Z"}]}
{"id":"letta-opencode-plugin-m8j","title":"Repo bootstrap: letta-x-opencode skeleton (HTTP MCP server)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:26:26.758774193Z","updated_at":"2025-12-23T23:26:26.758774193Z","comments":[{"id":151,"issue_id":"letta-opencode-plugin-m8j","author":"node","text":"Synced from Beads: letta-opencode-plugin-dga\n\n---\nHuly Issue: LETTA-82","created_at":"2025-12-23T23:26:26Z"}]}
{"id":"letta-opencode-plugin-maq","title":"Letta client adapter: agents/memory/messages with retries \u0026 409 handling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:30:43.95242734Z","updated_at":"2025-12-24T02:30:43.95242734Z","comments":[{"id":186,"issue_id":"letta-opencode-plugin-maq","author":"node","text":"Synced from Beads: letta-opencode-plugin-b4k\n\n---\nHuly Issue: LETTA-100","created_at":"2025-12-24T02:30:44Z"}]}
{"id":"letta-opencode-plugin-ms2","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:14:25.3123306Z","updated_at":"2025-12-24T03:14:25.3123306Z","comments":[{"id":205,"issue_id":"letta-opencode-plugin-ms2","author":"node","text":"Synced from Beads: letta-opencode-plugin-tfw\n\n---\nHuly Issue: LETTA-114","created_at":"2025-12-24T03:14:25Z"}]}
{"id":"letta-opencode-plugin-mxn","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T21:34:39.373704264Z","updated_at":"2025-12-23T21:34:39.373704264Z","comments":[{"id":136,"issue_id":"letta-opencode-plugin-mxn","author":"node","text":"Wire MCP send_task_control -\u003e OpenCode semantics. Map cancel to session.abort(), decide on pause/resume semantics (document behavior or emulate with container pause/unpause). Ensure workspace/matrix events reflect control outcomes.\n\nAcceptance Criteria:\n\n- cancel calls abort and tears down cleanly\n- pause/resume behavior documented (and implemented if feasible)\n- Workspace and Matrix reflect control changes\n\nOwners: @backend\nDue date: 2025-11-10\n\n---\nHuly Issue: LETTA-31","created_at":"2025-12-23T21:34:39Z"}]}
{"id":"letta-opencode-plugin-n9b","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:19:02.931810013Z","updated_at":"2025-12-23T20:19:02.931810013Z","comments":[{"id":123,"issue_id":"letta-opencode-plugin-n9b","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T20:19:03Z"}]}
{"id":"letta-opencode-plugin-nod","title":"Implement agent context retrieval tools for OpenCode","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:03.255927403Z","updated_at":"2025-12-22T23:47:03.255927403Z"}
{"id":"letta-opencode-plugin-ntu","title":"Container lifecycle management for OpenCode server","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T00:07:40.533790001Z","updated_at":"2025-12-24T00:07:40.533790001Z","comments":[{"id":173,"issue_id":"letta-opencode-plugin-ntu","author":"node","text":"Synced from Beads: letta-opencode-plugin-7a2\n\n---\nHuly Issue: LETTA-65","created_at":"2025-12-24T00:07:40Z"}]}
{"id":"letta-opencode-plugin-num","title":"Types and config updates for OpenCode integration","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T00:01:43.698046333Z","updated_at":"2025-12-24T00:01:43.698046333Z","comments":[{"id":169,"issue_id":"letta-opencode-plugin-num","author":"node","text":"Synced from Beads: letta-opencode-plugin-zy3\n\n---\nHuly Issue: LETTA-67","created_at":"2025-12-24T00:01:43Z"}]}
{"id":"letta-opencode-plugin-nv5","title":"Implement agent context retrieval tools for OpenCode","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:36.856731177Z","updated_at":"2025-12-23T03:25:36.856731177Z"}
{"id":"letta-opencode-plugin-o8g","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T23:55:56.593309391Z","updated_at":"2025-12-23T23:55:56.593309391Z","comments":[{"id":164,"issue_id":"letta-opencode-plugin-o8g","author":"node","text":"Synced from Beads: letta-opencode-plugin-dg7\n\n---\nHuly Issue: LETTA-70","created_at":"2025-12-23T23:55:56Z"}]}
{"id":"letta-opencode-plugin-oof","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:51:21.944701081Z","updated_at":"2025-12-24T02:51:21.944701081Z","comments":[{"id":195,"issue_id":"letta-opencode-plugin-oof","author":"node","text":"Synced from Beads: letta-opencode-plugin-u6z\n\n---\nHuly Issue: LETTA-91","created_at":"2025-12-24T02:51:22Z"}]}
{"id":"letta-opencode-plugin-osb","title":"Implement bidirectional communication via memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:32:28.035750313Z","updated_at":"2025-12-24T02:32:28.035750313Z","comments":[{"id":187,"issue_id":"letta-opencode-plugin-osb","author":"node","text":"Synced from Beads: letta-opencode-plugin-cqc\n\n---\nHuly Issue: LETTA-99","created_at":"2025-12-24T02:32:28Z"}]}
{"id":"letta-opencode-plugin-ov1","title":"Container lifecycle management for OpenCode server","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T17:49:59.002835063Z","updated_at":"2025-12-23T17:49:59.002835063Z","comments":[{"id":79,"issue_id":"letta-opencode-plugin-ov1","author":"node","text":"Start OpenCode server in detached mode per task, allocate dynamic ports, detect server readiness, health checks, and cleanup (kill, remove). Handle container IP/URL discovery for client connection. Add logging and error handling.\n\nAcceptance Criteria:\n\n- Container start/stop reliable across 100 runs\n- Server readiness detection under 5s median\n- Healthcheck endpoint monitored\n- Errors logged with containerId and taskId\n\nOwners: @platform\nDue date: 2025-10-30\n\n---\nHuly Issue: LETTA-30","created_at":"2025-12-23T17:49:59Z"}]}
{"id":"letta-opencode-plugin-owh","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:43:12.725179087Z","updated_at":"2025-12-23T22:43:12.725179087Z"}
{"id":"letta-opencode-plugin-p2f","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:42:03.21642426Z","updated_at":"2025-12-23T20:42:03.21642426Z"}
{"id":"letta-opencode-plugin-p7t","title":"Matrix client integration for Letta OpenCode Plugin","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:42:59.036891734Z","updated_at":"2025-12-23T23:42:59.036891734Z","comments":[{"id":156,"issue_id":"letta-opencode-plugin-p7t","author":"node","text":"Synced from Beads: letta-opencode-plugin-463\n\n---\nHuly Issue: LETTA-76","created_at":"2025-12-23T23:42:59Z"}]}
{"id":"letta-opencode-plugin-p9o","title":"Matrix-based multi-agent coordination via Synapse","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:23.268979175Z","updated_at":"2025-12-23T03:25:23.268979175Z","comments":[{"id":35,"issue_id":"letta-opencode-plugin-p9o","author":"node","text":"## Objective\n\nImplement Matrix (Synapse) as a coordination layer between Letta calling agents and OpenCode execution agents, enabling bidirectional communication, human-in-the-loop participation, and conversation archiving.\n\n## Scope\n\n- Create Matrix rooms per OpenCode task with automatic participant management\n- Route messages between Letta agents, OpenCode dev agents, and human observers\n- Support task control signals (cancel, pause/resume) and runtime updates\n- Archive conversations for later review and learning\n\n## Success Criteria\n\n- New Matrix integration architecture documented\n- End-to-end task flow demonstrated: task creation → Matrix room → bidirectional messaging → archival\n- Human observer can join task room and provide feedback\n\n## Deliverables\n\n1. Architecture \u0026 configuration docs\n2. Matrix coordination services (room manager, message router, communication layer)\n3. Integration tests covering agent ↔ dev ↔ human loop\n\n## Dependencies\n\n- LETTA-9 through LETTA-14 (MCP server core) – completed\n- LETTA-10 (Letta client adapter) – completed\n\n## Out of Scope\n\n- External federation across organizations\n- Advanced analytics/learning from conversations\n\n---\nHuly Issue: LETTA-15","created_at":"2025-12-23T03:25:23Z"}]}
{"id":"letta-opencode-plugin-q47","title":"Runtime updates and feedback loop implementation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:21:51.625162598Z","updated_at":"2025-12-24T02:21:51.625162598Z","comments":[{"id":182,"issue_id":"letta-opencode-plugin-q47","author":"node","text":"Synced from Beads: letta-opencode-plugin-kdx\n\n---\nHuly Issue: LETTA-103","created_at":"2025-12-24T02:21:51Z"}]}
{"id":"letta-opencode-plugin-q9h","title":"Workspace block schema + optimistic concurrency helpers","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:30.387225845Z","updated_at":"2025-12-23T03:25:30.387225845Z"}
{"id":"letta-opencode-plugin-qij","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T19:44:45.718816329Z","updated_at":"2025-12-23T19:44:45.718816329Z","comments":[{"id":115,"issue_id":"letta-opencode-plugin-qij","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T19:44:45Z"}]}
{"id":"letta-opencode-plugin-qla","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T20:14:01.182538131Z","updated_at":"2025-12-23T20:14:01.182538131Z","comments":[{"id":122,"issue_id":"letta-opencode-plugin-qla","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T20:14:01Z"}]}
{"id":"letta-opencode-plugin-r54","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T20:25:41.014873519Z","updated_at":"2025-12-23T20:25:41.014873519Z","comments":[{"id":126,"issue_id":"letta-opencode-plugin-r54","author":"node","text":"Wire MCP send_task_control -\u003e OpenCode semantics. Map cancel to session.abort(), decide on pause/resume semantics (document behavior or emulate with container pause/unpause). Ensure workspace/matrix events reflect control outcomes.\n\nAcceptance Criteria:\n\n- cancel calls abort and tears down cleanly\n- pause/resume behavior documented (and implemented if feasible)\n- Workspace and Matrix reflect control changes\n\nOwners: @backend\nDue date: 2025-11-10\n\n---\nHuly Issue: LETTA-31","created_at":"2025-12-23T20:25:41Z"}]}
{"id":"letta-opencode-plugin-reh","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T19:24:02.025825899Z","updated_at":"2025-12-23T19:24:02.025825899Z","comments":[{"id":109,"issue_id":"letta-opencode-plugin-reh","author":"node","text":"## Issue\n\nTask completion notifications use  which is incorrect per Letta message semantics.\n\n### Required Fix\n\n\n\n### Locations to Update\n\n-  - Completion notification\n-  - Failure notification\n\n### Optional Enhancement\n\nMake notifications configurable via ENABLE_TASK_NOTIFICATIONS env var\n\n### Acceptance Criteria\n\n- [ ] All automated notifications use \n- [ ] Optional: Notifications are configurable\n- [ ] Tested with Letta agent\n\n---\nHuly Issue: LETTA-38","created_at":"2025-12-23T19:24:02Z"}]}
{"id":"letta-opencode-plugin-rjp","title":"Implement primary task delegation tool for agents","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:03.196568907Z","updated_at":"2025-12-22T23:47:03.196568907Z"}
{"id":"letta-opencode-plugin-rnd","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T23:52:20.477820478Z","updated_at":"2025-12-23T23:52:20.477820478Z","comments":[{"id":162,"issue_id":"letta-opencode-plugin-rnd","author":"node","text":"Synced from Beads: letta-opencode-plugin-rje\n\n---\nHuly Issue: LETTA-72","created_at":"2025-12-23T23:52:20Z"}]}
{"id":"letta-opencode-plugin-sly","title":"Repo bootstrap: letta-x-opencode skeleton (HTTP MCP server)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:44:23.345193066Z","updated_at":"2025-12-24T02:44:23.345193066Z","comments":[{"id":192,"issue_id":"letta-opencode-plugin-sly","author":"node","text":"Synced from Beads: letta-opencode-plugin-vg2\n\n---\nHuly Issue: LETTA-94","created_at":"2025-12-24T02:44:23Z"}]}
{"id":"letta-opencode-plugin-t2y","title":"Add character limits to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:22.871147215Z","updated_at":"2025-12-23T03:25:22.871147215Z","comments":[{"id":34,"issue_id":"letta-opencode-plugin-t2y","author":"node","text":"## Critical Issue\n\nWorkspace memory blocks are created without character limits, risking context window overflow.\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add limit parameter\n-  - Add size validation\n-  - Add WORKSPACE_BLOCK_LIMIT variable\n\n### Acceptance Criteria\n\n- [ ] All workspace blocks created with character limit\n- [ ] Limit configurable via environment variable (default 50000)\n- [ ] Size validation before updates\n- [ ] Works with event pruning (LETTA-36)\n\n---\nHuly Issue: LETTA-37","created_at":"2025-12-23T03:25:23Z"}]}
{"id":"letta-opencode-plugin-tjv","title":"Add file access tools: get_task_files, read_task_file","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T03:25:34.495123393Z","updated_at":"2025-12-23T03:25:34.495123393Z","comments":[{"id":57,"issue_id":"letta-opencode-plugin-tjv","author":"node","text":"Expose task file operations by powering them with OpenCode SDK: list changed/created files and read file content from the running session. Update server.ts with the new tools and docs.\n\nAcceptance Criteria:\n\n- get_task_files returns changed/created file list\n- read_task_file returns file content\n- Handles large files gracefully (truncate or stream)\n\nOwners: @backend\nDue date: 2025-11-08\n\n---\nHuly Issue: LETTA-29","created_at":"2025-12-23T03:25:34Z"}]}
{"id":"letta-opencode-plugin-u0f","title":"Matrix conversation archiving and review tooling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:06:35.049549611Z","updated_at":"2025-12-24T03:06:35.049549611Z","comments":[{"id":200,"issue_id":"letta-opencode-plugin-u0f","author":"node","text":"Synced from Beads: letta-opencode-plugin-v6m\n\n---\nHuly Issue: LETTA-86","created_at":"2025-12-24T03:06:35Z"}]}
{"id":"letta-opencode-plugin-ua0","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T23:57:38.825970128Z","updated_at":"2025-12-23T23:57:38.825970128Z","comments":[{"id":167,"issue_id":"letta-opencode-plugin-ua0","author":"node","text":"Synced from Beads: letta-opencode-plugin-f4v\n\n---\nHuly Issue: LETTA-69","created_at":"2025-12-23T23:57:39Z"}]}
{"id":"letta-opencode-plugin-ukk","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:31:25.842651639Z","updated_at":"2025-12-23T21:31:25.842651639Z","comments":[{"id":133,"issue_id":"letta-opencode-plugin-ukk","author":"node","text":"Objective: Migrate Letta OpenCode Plugin from invoking Claude CLI directly to integrating with the OpenCode headless HTTP server (opencode serve) using the official @opencode-ai/sdk.\n\nWhy:\n\n- Structured API for sessions, messages, files\n- Real-time event streaming via /event\n- Better control (abort, observe, permissions)\n- File/status access and richer results\n\nScope:\n\n- Build/run OpenCode server in Docker per task\n- Connect via @opencode-ai/sdk client\n- Create/manage sessions, send prompts, stream events\n- Map events to Workspace blocks and Matrix\n- Expose file tools to agents (list/read)\n- Maintain current tool surface and memory lifecycle\n- Backward-compat flag and rollout plan\n\nDone when:\n\n- All existing tools continue to work\n- New file access tools available\n- Event stream updates arrive in Workspace\n- Control signals (cancel) mapped to abort\n- Tests pass and deployment stable\n\n---\nHuly Issue: LETTA-25","created_at":"2025-12-23T21:31:26Z"}]}
{"id":"letta-opencode-plugin-v5d","title":"Add file size validation to read_task_file tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:16:38.668276936Z","updated_at":"2025-12-24T02:16:38.668276936Z","comments":[{"id":180,"issue_id":"letta-opencode-plugin-v5d","author":"node","text":"Synced from Beads: letta-opencode-plugin-d5o\n\n---\nHuly Issue: LETTA-106","created_at":"2025-12-24T02:16:38Z"}]}
{"id":"letta-opencode-plugin-v95","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T22:36:45.628722184Z","updated_at":"2025-12-23T22:36:45.628722184Z","comments":[{"id":149,"issue_id":"letta-opencode-plugin-v95","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T22:36:45Z"}]}
{"id":"letta-opencode-plugin-vjc","title":"Add description field to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:31.276200934Z","updated_at":"2025-12-23T03:25:31.276200934Z","comments":[{"id":50,"issue_id":"letta-opencode-plugin-vjc","author":"node","text":"## Critical Issue\n\nPer Letta documentation review (docs/IMPLEMENTATION_REVIEW.md), workspace memory blocks are missing the critical  field.\n\n### Current Implementation\n\n\n\n### Why This Matters\n\nFrom Letta docs:\n\n\u003e \"The description is the main information used by the agent to determine how to read and write to that block. Without a good description, the agent may not understand how to use the block.\"\n\nWithout this field, agents don't understand:\n\n- What the block contains\n- How to interpret the JSON structure\n- When to check the block\n- What fields are important\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add description parameter\n-  - Update CreateMemoryBlockRequest interface\n\n### Acceptance Criteria\n\n- [ ] Description field added to all workspace block creation calls\n- [ ] Type definitions updated to include description\n- [ ] Description clearly explains workspace block structure and usage\n- [ ] Tested with Letta agent to verify understanding\n\n---\nHuly Issue: LETTA-35","created_at":"2025-12-23T03:25:31Z"}]}
{"id":"letta-opencode-plugin-vly","title":"Bidirectional communication layer (cancel/pause/resume/updates)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:25.253199073Z","updated_at":"2025-12-23T03:25:25.253199073Z","comments":[{"id":40,"issue_id":"letta-opencode-plugin-vly","author":"node","text":"## Objective\n\nImplement a communication layer supporting bidirectional signals between Letta agents and OpenCode tasks via Matrix, covering cancellation, pause/resume, runtime updates, and feedback loops.\n\n## Scope\n\n- Define CommunicationLayer interface\n- Implement task control signals: cancel, pause, resume\n- Add runtime update mechanism for injecting new context mid-execution\n- Support feedback loop where agent reviews artifacts and requests changes\n\n## Acceptance Criteria\n\n- Sending Matrix control message updates task status (cancel/pause/resume)\n- Runtime updates modify workspace block metadata and notify execution\n- Feedback messages tracked and acknowledged by dev agent\n- Unit tests simulate control signals and ensure proper propagation\n\n## Notes\n\n- Use Matrix message types described in design doc\n- Ensure resilience (e.g., retry on delivery failures)\n- Integrate with ExecutionManager to handle pause/resume commands\n\n---\nHuly Issue: LETTA-18","created_at":"2025-12-23T03:25:25Z"}]}
{"id":"letta-opencode-plugin-vtg","title":"Implement event pruning to prevent workspace block overflow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:44:50.508452318Z","updated_at":"2025-12-23T23:44:50.508452318Z","comments":[{"id":158,"issue_id":"letta-opencode-plugin-vtg","author":"node","text":"Synced from Beads: letta-opencode-plugin-30i\n\n---\nHuly Issue: LETTA-75","created_at":"2025-12-23T23:44:50Z"}]}
{"id":"letta-opencode-plugin-vu4","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T21:49:40.810187863Z","updated_at":"2025-12-23T21:49:40.810187863Z","comments":[{"id":143,"issue_id":"letta-opencode-plugin-vu4","author":"node","text":"## Objective\n\nDevelop integration tests that validate the full Matrix-based coordination flow: task creation, room setup, bidirectional messaging, task control, and archival.\n\n## Scope\n\n- Create automated tests simulating Letta calling agent, OpenCode dev agent, and optional human participant\n- Use Matrix test rooms with mocked Synapse server or local deployment\n- Verify message routing, task control signals, runtime updates, and archiving\n\n## Acceptance Criteria\n\n- Test suite spins up Matrix test environment and Letta OpenCode Plugin instance\n- Scenario coverage:\n  1. Task creation → Matrix room → agent ↔ dev messaging → completion\n  2. Task cancellation via Matrix command\n  3. Runtime update → dev acknowledgement → updated artifact\n  4. Human observer joins and sends feedback\n  5. Archive generation and retrieval\n- Tests integrated into CI pipeline with documentation\n\n## Notes\n\n- Consider using matrix-bot-sdk testing utilities\n- Provide environment setup scripts for local testing\n- Coordinate with LETTA-23 for archival verification\n\n---\nHuly Issue: LETTA-24","created_at":"2025-12-23T21:49:41Z"}]}
{"id":"letta-opencode-plugin-vx1","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:11:44.104777397Z","updated_at":"2025-12-24T03:11:44.104777397Z","comments":[{"id":202,"issue_id":"letta-opencode-plugin-vx1","author":"node","text":"Synced from Beads: letta-opencode-plugin-okp\n\n---\nHuly Issue: LETTA-84","created_at":"2025-12-24T03:11:44Z"}]}
{"id":"letta-opencode-plugin-vxu","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T02:14:17.244115012Z","updated_at":"2025-12-24T02:14:17.244115012Z","comments":[{"id":179,"issue_id":"letta-opencode-plugin-vxu","author":"node","text":"Synced from Beads: letta-opencode-plugin-ce3\n\n---\nHuly Issue: LETTA-107","created_at":"2025-12-24T02:14:17Z"}]}
{"id":"letta-opencode-plugin-w0v","title":"Add @opencode-ai/sdk client and OpencodeClientManager","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T03:25:29.560181562Z","updated_at":"2025-12-23T03:25:29.560181562Z","comments":[{"id":47,"issue_id":"letta-opencode-plugin-w0v","author":"node","text":"Introduce @opencode-ai/sdk as a dependency and create an OpencodeClientManager for lifecycle management (connect, wait for server, reuse per-task, teardown). Provide methods: createClient(taskId, serverUrl), getClient(taskId), destroyClient(taskId).\n\nAcceptance Criteria:\n\n- SDK installed and pinned\n- ClientManager implemented with health checks and retries\n- Unit tests for connect/disconnect\n\nOwners: @backend\nDue date: 2025-10-28\n\n---\nHuly Issue: LETTA-27","created_at":"2025-12-23T03:25:29Z"}]}
{"id":"letta-opencode-plugin-ws8","title":"Implement primary task delegation tool for agents","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:25:36.608978461Z","updated_at":"2025-12-23T03:25:36.608978461Z"}
{"id":"letta-opencode-plugin-xk4","title":"Implement event pruning to prevent workspace block overflow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T23:44:50.967696794Z","updated_at":"2025-12-23T23:44:50.967696794Z","comments":[{"id":159,"issue_id":"letta-opencode-plugin-xk4","author":"node","text":"Synced from Beads: letta-opencode-plugin-30i\n\n---\nHuly Issue: LETTA-75","created_at":"2025-12-23T23:44:51Z"}]}
{"id":"letta-opencode-plugin-yyo","title":"Matrix client integration for Letta OpenCode Plugin","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T03:09:17.126194316Z","updated_at":"2025-12-24T03:09:17.126194316Z","comments":[{"id":201,"issue_id":"letta-opencode-plugin-yyo","author":"node","text":"Synced from Beads: letta-opencode-plugin-463\n\n---\nHuly Issue: LETTA-85","created_at":"2025-12-24T03:09:17Z"}]}
{"id":"letta-opencode-plugin-znj","title":"Increase default MAX_CONCURRENT_TASKS from 3 to 10","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T18:04:59.187536512Z","updated_at":"2025-12-23T18:04:59.187536512Z","comments":[{"id":85,"issue_id":"letta-opencode-plugin-znj","author":"node","text":"## Configuration Improvement\n\nCurrent max of 3 concurrent tasks is too conservative for production use.\n\n### Recommended Change\n\n\n\n### Justification\n\n- Modern hardware can handle 10+ Docker containers\n- Each container has resource limits (2 CPU, 2g RAM)\n- Current limit causes frequent 429 errors\n\n### Files to Update\n\n-  - Change default \"3\" to \"10\"\n-  - Update documentation\n\n### Acceptance Criteria\n\n- [ ] Default increased to 10\n- [ ] Still configurable via env var\n- [ ] Load tested with 10+ tasks\n- [ ] No resource exhaustion\n\n---\nHuly Issue: LETTA-41","created_at":"2025-12-23T18:04:59Z"}]}
{"id":"letta-opencode-plugin-zo2","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T00:05:49.706259077Z","updated_at":"2025-12-24T00:05:49.706259077Z","comments":[{"id":171,"issue_id":"letta-opencode-plugin-zo2","author":"node","text":"Synced from Beads: letta-opencode-plugin-mq3\n\n---\nHuly Issue: LETTA-65","created_at":"2025-12-24T00:05:49Z"}]}
