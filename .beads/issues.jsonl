{"id":"letta-opencode-plugin-bge","title":"Add @opencode-ai/sdk client and OpencodeClientManager","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:45.591367654Z","updated_at":"2025-12-28T07:39:38.03673999Z","closed_at":"2025-12-28T07:39:38.03673999Z","close_reason":"Closed","comments":[{"id":537,"issue_id":"letta-opencode-plugin-bge","author":"node","text":"Introduce @opencode-ai/sdk as a dependency and create an OpencodeClientManager for lifecycle management (connect, wait for server, reuse per-task, teardown). Provide methods: createClient(taskId, serverUrl), getClient(taskId), destroyClient(taskId).\n\nAcceptance Criteria:\n\n- SDK installed and pinned\n- ClientManager implemented with health checks and retries\n- Unit tests for connect/disconnect\n\nOwners: @backend\nDue date: 2025-10-28\n\n---\nHuly Issue: LETTA-27","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-v11v","title":"Add CI workflow for tests and linting","description":"Create a GitHub Actions workflow that runs on PRs and pushes to master/main:\n\n## Requirements\n- Run `npm ci` to install dependencies\n- Run `npm run lint` to check code style\n- Run `npm run test:coverage` to run tests with coverage\n- Fail if coverage thresholds not met (70% branches/functions/lines/statements)\n- Cache node_modules for faster builds\n- Run on ubuntu-latest with Node 20.x\n\n## Triggers\n- Pull requests to master/main\n- Push to master/main\n\n## Nice to have\n- Upload coverage reports as artifacts\n- Comment coverage summary on PRs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:15:40.513591086Z","updated_at":"2025-12-28T07:49:21.272043806Z","closed_at":"2025-12-28T07:49:21.272043806Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-zp5l","title":"Add Dependabot configuration","description":"Set up Dependabot for automated dependency updates.\n\n## Requirements\n- Create `.github/dependabot.yml`\n- Configure for npm ecosystem\n- Weekly update schedule\n- Group minor/patch updates together\n- Auto-merge patch updates (optional)\n\n## Configuration\n```yaml\nversion: 2\nupdates:\n  - package-ecosystem: npm\n    directory: /\n    schedule:\n      interval: weekly\n    groups:\n      minor-and-patch:\n        update-types:\n          - minor\n          - patch\n    commit-message:\n      prefix: deps\n```\n\n## Also consider\n- GitHub Actions updates\n- Docker base image updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:16:21.97886686Z","updated_at":"2025-12-28T07:49:21.386823641Z","closed_at":"2025-12-28T07:49:21.386823641Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-5o6n","title":"Add ESLint configuration","description":"Set up ESLint for TypeScript with modern flat config.\n\n## Requirements\n- Use ESLint 9.x flat config format (`eslint.config.js`)\n- Configure for TypeScript with `@typescript-eslint` plugin\n- Enable recommended rules for TypeScript\n- Configure for ESM modules\n- Ignore dist/, node_modules/, coverage/\n\n## Rules to consider\n- No unused variables (warn)\n- No explicit any (warn)\n- Consistent type imports\n- No console in production code (warn, allow console.error)\n\n## Dependencies to add\n- eslint\n- @typescript-eslint/eslint-plugin\n- @typescript-eslint/parser\n- globals","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:15:51.345904049Z","updated_at":"2025-12-28T07:49:21.109239125Z","closed_at":"2025-12-28T07:49:21.109239125Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-atpf","title":"Add Prettier configuration","description":"Set up Prettier for consistent code formatting.\n\n## Requirements\n- Create `.prettierrc` with project standards\n- Create `.prettierignore` for dist/, node_modules/, coverage/\n- Add `format` and `format:check` npm scripts\n\n## Suggested settings\n- Semi: true\n- Single quotes: false (use double quotes)\n- Tab width: 2\n- Trailing comma: es5\n- Print width: 100\n\n## Integration\n- Integrate with ESLint using eslint-config-prettier\n- Add to CI workflow format check","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:15:58.432893144Z","updated_at":"2025-12-28T07:49:21.178332136Z","closed_at":"2025-12-28T07:49:21.178332136Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-e4dw","title":"Add automated release workflow","description":"Set up GitHub Actions workflow for automated releases with semantic versioning.\n\n## Requirements\n- Trigger on push of version tags (v*)\n- Generate changelog from conventional commits\n- Create GitHub Release with:\n  - Auto-generated release notes\n  - Changelog\n  - Link to Docker images\n- Optionally publish to npm (if needed later)\n\n## Conventional Commits\n- feat: minor version bump\n- fix: patch version bump  \n- BREAKING CHANGE: major version bump\n\n## Tools to consider\n- semantic-release or release-please\n- conventional-changelog\n\n## Integration\n- Coordinate with docker-build.yml (already builds on tags)\n- Add release notes template","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:16:14.188916884Z","updated_at":"2025-12-28T07:49:21.444970417Z","closed_at":"2025-12-28T07:49:21.444970417Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-2gxm","title":"Add character limits to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T14:28:23.324309019Z","updated_at":"2025-12-24T14:28:23.324309019Z","comments":[{"id":508,"issue_id":"letta-opencode-plugin-2gxm","author":"node","text":"## Critical Issue\n\nWorkspace memory blocks are created without character limits, risking context window overflow.\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add limit parameter\n-  - Add size validation\n-  - Add WORKSPACE_BLOCK_LIMIT variable\n\n### Acceptance Criteria\n\n- [ ] All workspace blocks created with character limit\n- [ ] Limit configurable via environment variable (default 50000)\n- [ ] Size validation before updates\n- [ ] Works with event pruning (LETTA-36)\n\n---\nHuly Issue: LETTA-37","created_at":"2025-12-24T14:28:23Z"}]}
{"id":"letta-opencode-plugin-hje","title":"Add description field to workspace memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.029490805Z","updated_at":"2025-12-22T23:47:02.029490805Z","comments":[{"id":545,"issue_id":"letta-opencode-plugin-hje","author":"node","text":"## Critical Issue\n\nPer Letta documentation review (docs/IMPLEMENTATION_REVIEW.md), workspace memory blocks are missing the critical  field.\n\n### Current Implementation\n\n\n\n### Why This Matters\n\nFrom Letta docs:\n\n> \"The description is the main information used by the agent to determine how to read and write to that block. Without a good description, the agent may not understand how to use the block.\"\n\nWithout this field, agents don't understand:\n\n- What the block contains\n- How to interpret the JSON structure\n- When to check the block\n- What fields are important\n\n### Required Fix\n\n\n\n### Files to Update\n\n-  - Add description parameter\n-  - Update CreateMemoryBlockRequest interface\n\n### Acceptance Criteria\n\n- [ ] Description field added to all workspace block creation calls\n- [ ] Type definitions updated to include description\n- [ ] Description clearly explains workspace block structure and usage\n- [ ] Tested with Letta agent to verify understanding\n\n---\nHuly Issue: LETTA-35","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-6fd","title":"Add file access tools: get_task_files, read_task_file","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:40:46.445012916Z","updated_at":"2025-12-22T23:47:02.670217257Z","comments":[{"id":530,"issue_id":"letta-opencode-plugin-6fd","author":"node","text":"Expose task file operations by powering them with OpenCode SDK: list changed/created files and read file content from the running session. Update server.ts with the new tools and docs.\n\nAcceptance Criteria:\n\n- get_task_files returns changed/created file list\n- read_task_file returns file content\n- Handles large files gracefully (truncate or stream)\n\nOwners: @backend\nDue date: 2025-11-08\n\n---\nHuly Issue: LETTA-29","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-1b1x","title":"Add file size validation to read_task_file tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:55:21.354657633Z","updated_at":"2025-12-26T21:55:21.354657633Z","comments":[{"id":658,"issue_id":"letta-opencode-plugin-1b1x","author":"node","text":"Synced from Beads: letta-opencode-plugin-v5d\n\n---\nHuly Issue: LETTA-227","created_at":"2025-12-26T21:55:21Z"}]}
{"id":"letta-opencode-plugin-ybdt","title":"Add integration tests for OpenCode SDK client","description":"Add tests to verify critical SDK interactions work correctly after the 1.0 upgrade.\n\n## Critical paths to test\n1. Session creation - verify session.create returns valid session ID\n2. Prompt sending - verify session.prompt sends message correctly  \n3. Event subscription - verify event.subscribe returns async iterable\n4. Session abort - verify session.abort works\n5. File operations - verify file.status and file.read work\n\n## Test approach\n- Mock the OpenCode server responses where possible\n- Add integration tests that can run against a real server (optional)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T05:35:24.097027657Z","updated_at":"2025-12-28T05:35:24.097027657Z"}
{"id":"letta-opencode-plugin-4w3x","title":"Add pagination to get_task_history tool","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T12:45:32.359693168Z","updated_at":"2025-12-24T12:45:32.359693168Z","comments":[{"id":488,"issue_id":"letta-opencode-plugin-4w3x","author":"node","text":"Synced from Beads: letta-opencode-plugin-2z0\n\n---\nHuly Issue: LETTA-71","created_at":"2025-12-24T12:45:32Z"}]}
{"id":"letta-opencode-plugin-60o8","title":"Add pre-commit hooks with Husky","description":"Set up Husky for git hooks to enforce quality before commits.\n\n## Requirements\n- Install husky and lint-staged\n- Configure pre-commit hook to run:\n  - lint-staged (ESLint + Prettier on staged files)\n  - Type check (`tsc --noEmit`)\n- Configure pre-push hook to run tests\n\n## lint-staged config\n```json\n{\n  \"*.ts\": [\"eslint --fix\", \"prettier --write\"],\n  \"*.{json,md,yml}\": [\"prettier --write\"]\n}\n```\n\n## Setup\n- Add `prepare` script: `husky`\n- Document hook bypass with `--no-verify` for emergencies","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T07:16:06.497991264Z","updated_at":"2025-12-28T07:49:21.328407354Z","closed_at":"2025-12-28T07:49:21.328407354Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-e95","title":"Backward compatibility flag and rollout (blue/green)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.369503579Z","updated_at":"2025-12-22T23:47:02.369503579Z","comments":[{"id":543,"issue_id":"letta-opencode-plugin-e95","author":"node","text":"Introduce feature flag to toggle CLI vs OpenCode server (OPENCODE_SERVER_ENABLED). Implement blue/green rollout: deploy side by side, route small traffic, monitor, ramp to 100%, rollback path documented.\n\nAcceptance Criteria:\n\n- Feature flag wired into ExecutionManager path\n- Blue/green rollout documented and trialed\n- Rollback tested\n\nOwners: @platform\nDue date: 2025-11-12\n\n---\nHuly Issue: LETTA-33","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-g380","title":"Bidirectional communication layer (cancel/pause/resume/updates)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:56:46.409121327Z","updated_at":"2025-12-26T21:56:46.409121327Z","comments":[{"id":771,"issue_id":"letta-opencode-plugin-g380","author":"node","text":"## Objective\n\nImplement a communication layer supporting bidirectional signals between Letta agents and OpenCode tasks via Matrix, covering cancellation, pause/resume, runtime updates, and feedback loops.\n\n## Scope\n\n- Define CommunicationLayer interface\n- Implement task control signals: cancel, pause, resume\n- Add runtime update mechanism for injecting new context mid-execution\n- Support feedback loop where agent reviews artifacts and requests changes\n\n## Acceptance Criteria\n\n- Sending Matrix control message updates task status (cancel/pause/resume)\n- Runtime updates modify workspace block metadata and notify execution\n- Feedback messages tracked and acknowledged by dev agent\n- Unit tests simulate control signals and ensure proper propagation\n\n## Notes\n\n- Use Matrix message types described in design doc\n- Ensure resilience (e.g., retry on delivery failures)\n- Integrate with ExecutionManager to handle pause/resume commands\n\n---\nHuly Issue: LETTA-18","created_at":"2025-12-26T21:56:46Z"}]}
{"id":"letta-opencode-plugin-7a2","title":"Container lifecycle management for OpenCode server","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:44.518336616Z","updated_at":"2025-12-28T07:39:38.229270969Z","closed_at":"2025-12-28T07:39:38.229270969Z","close_reason":"Closed","comments":[{"id":534,"issue_id":"letta-opencode-plugin-7a2","author":"node","text":"Start OpenCode server in detached mode per task, allocate dynamic ports, detect server readiness, health checks, and cleanup (kill, remove). Handle container IP/URL discovery for client connection. Add logging and error handling.\n\nAcceptance Criteria:\n\n- Container start/stop reliable across 100 runs\n- Server readiness detection under 5s median\n- Healthcheck endpoint monitored\n- Errors logged with containerId and taskId\n\nOwners: @platform\nDue date: 2025-10-30\n\n---\nHuly Issue: LETTA-30","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-2wm","title":"Design ExecutionManager refactor to use OpenCode HTTP API","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T23:40:45.452494992Z","updated_at":"2025-12-28T07:39:38.305521152Z","closed_at":"2025-12-28T07:39:38.305521152Z","close_reason":"Closed","comments":[{"id":528,"issue_id":"letta-opencode-plugin-2wm","author":"node","text":"Refactor ExecutionManager to start an OpenCode server container (opencode serve) per task and connect via @opencode-ai/sdk. Implement session creation, prompt sending, event streaming, and graceful shutdown.\n\nAcceptance Criteria:\n\n- Container starts with opencode serve exposed\n- SDK client connects and creates a session\n- Prompt is sent and responses handled\n- Events streamed to WorkspaceManager\n- Cancel maps to session.abort()\n- Pause/resume placeholder behavior documented\n\nOwners: @backend @platform\nDue date: 2025-11-01\n\n---\nHuly Issue: LETTA-26","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-0wqz","title":"Design OpenCode-as-Appendage architecture for Letta agent delegation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T06:17:13.176253975Z","updated_at":"2025-12-24T07:12:16.179581192Z","comments":[{"id":271,"issue_id":"letta-opencode-plugin-0wqz","author":"node","text":"Synced from Beads: letta-opencode-plugin-mxn\n\n---\nHuly Issue: LETTA-125","created_at":"2025-12-24T06:17:13Z"}]}
{"id":"letta-opencode-plugin-38oi","title":"Design and implement transport mechanism for Letta-OpenCode communication","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:55:11.961584973Z","updated_at":"2025-12-26T21:55:11.961584973Z","comments":[{"id":649,"issue_id":"letta-opencode-plugin-38oi","author":"node","text":"Synced from Beads: letta-opencode-plugin-c24\n\n---\nHuly Issue: LETTA-243","created_at":"2025-12-26T21:55:12Z"}]}
{"id":"letta-opencode-plugin-00d5","title":"End-to-end Matrix coordination integration tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T12:06:52.251881726Z","updated_at":"2025-12-28T01:04:34.765059333Z","comments":[{"id":460,"issue_id":"letta-opencode-plugin-00d5","author":"node","text":"## Objective\n\nEnable Letta calling agents (and human participants) to provide runtime updates and feedback to OpenCode tasks, supporting iterative correction and refinement.\n\n## Scope\n\n- Extend WorkspaceManager to track runtime updates and feedback events\n- Implement Matrix message handling for runtime updates (requirement changes) and feedback requests\n- Notify OpenCode dev agent of new updates and track acknowledgements\n- Provide API for dev agent to request clarification or confirm updates\n\n## Acceptance Criteria\n\n- Runtime updates appear in workspace block metadata and Matrix room with context\n- Dev agent receives updates and confirms receipt (logged in Matrix)\n- Feedback loop supports: request review → provide corrections → confirmation\n- Tests cover scenarios: new requirements mid-task, versioning of updates, human feedback\n\n## Notes\n\n- Ensure updates do not overwrite existing metadata (merge strategy)\n- Provide clear logging for update history for auditing\n- Coordinate with message router for consistent event tagging\n\n---\nHuly Issue: LETTA-22","created_at":"2025-12-24T12:06:52Z"}]}
{"id":"letta-opencode-plugin-2f5x","title":"Evaluate and reuse opencode-mcp-tool repo for MCP server scaffolding","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T14:53:07.245589555Z","updated_at":"2025-12-24T14:53:07.245589555Z","comments":[{"id":517,"issue_id":"letta-opencode-plugin-2f5x","author":"node","text":"## Objective\n\nReview the archived repo https://github.com/frap129/opencode-mcp-tool and decide what to reuse for our MCP-only OpenCode appendage server.\n\n## Findings (initial)\n\n- Uses @modelcontextprotocol/sdk v0.5.0 (outdated) and StdioServerTransport only\n- Provides MCP server skeleton with tools registry, prompts, progress notifications/keepalive\n- Tools implemented: ask-opencode, brainstorm, timeout-test, ping, help, slash commands\n- Executes OpenCode via local CLI (no containerization, no Letta integration)\n- No auth, idempotency, queuing, or workspace block concepts\n- MIT licensed (compatible for reuse)\n\n## Reuse Plan\n\n- Reuse: tool registry pattern, progress notification keepalive loop, CLI execution wrapper abstraction\n- Replace: transport with Streamable HTTP, SDK ^1.16.0, tool set with our  +  tools\n- Add: Letta API client, Execution Manager (container spawn/limits), idempotency/queue, optimistic concurrency on workspace blocks\n\n## Deliverables\n\n1. Delta design doc (what to keep, what to change)\n2. Migration tasks list (SDK upgrade, transport switch, new tools, remove legacy tools)\n3. Spike PR to port skeleton and boot a streamable HTTP MCP server\n\n## Acceptance Criteria\n\n- Documented decision (reuse vs fresh)\n- If reuse: working HTTP MCP server boots with health log\n- Clear task breakdown for upgrade path\n\n---\nHuly Issue: LETTA-7","created_at":"2025-12-24T14:53:07Z"}]}
{"id":"letta-opencode-plugin-0y8s","title":"Execution Manager: container spawn/limits/timeouts/log tail","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T15:04:28.996801221Z","updated_at":"2025-12-24T15:04:28.996801221Z"}
{"id":"letta-opencode-plugin-2ky3","title":"Fix completion notification role (use system instead of user)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:54:24.217569668Z","updated_at":"2025-12-26T22:21:36.153778903Z","comments":[{"id":611,"issue_id":"letta-opencode-plugin-2ky3","author":"node","text":"Synced from Beads: letta-opencode-plugin-4qkw\n\n---\nHuly Issue: LETTA-268","created_at":"2025-12-26T21:54:24Z"}]}
{"id":"letta-opencode-plugin-s2og","title":"Fix tool approval disabling for ephemeral workers in MCP bridge","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T21:56:47.07080206Z","updated_at":"2025-12-28T07:39:38.384055044Z","closed_at":"2025-12-28T07:39:38.384055044Z","close_reason":"Closed","comments":[{"id":772,"issue_id":"letta-opencode-plugin-s2og","author":"node","text":"## Problem\n\nThe MCP bridge (http-wrapper-v3-fixed.js) attempts to disable tool approval requirements for ephemeral worker agents, but the approval is still being enforced during execution.\n\n## Current Behavior\n\n- Code successfully calls PATCH  with \n- Logs show \"✓ Disabled approval for tool {name}\" for all 6 filesystem tools (Read, Write, Edit, Glob, Grep, LS)\n- Despite this, tools still require approval when worker executes tasks\n- Main agent shows  with  for all tools\n\n## Expected Behavior\n\nEphemeral worker agents should execute filesystem tools autonomously without human-in-the-loop approval prompts.\n\n## Technical Details\n\n- **File**: \n- **Lines**: 263-291 (approval disabling logic)\n- **API Endpoint**:  (PATCH)\n- **Tool ID Mapping**:  populated at startup (line 149)\n\n## Investigation Needed\n\n1. Verify API response indicates success\n2. Check if tool_rules persist after PATCH call\n3. Determine if there's a delay/caching issue\n4. Test if approval needs to be disabled before or after tool attachment\n\n## Related Files\n\n-  (lines 263-291)\n-  (execution logs)\n\n---\nHuly Issue: LETTA-43","created_at":"2025-12-26T21:56:47Z"}]}
{"id":"letta-opencode-plugin-d1k","title":"Fix unused parameter warnings in letta-client.ts","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:00.051474081Z","updated_at":"2025-12-22T23:47:00.051474081Z","comments":[{"id":540,"issue_id":"letta-opencode-plugin-d1k","author":"node","text":"## Code Quality Issue\n\nTypeScript hints indicate unused  parameters:\n\n- letta-client.ts:70:5\n- letta-client.ts:87:5\n\n### Investigation Needed\n\nReview if  is truly unused in  and  methods, or if it should be used for logging/validation.\n\n### Files to Review\n\n-  - createMemoryBlock\n-  - updateMemoryBlock\n\n### Acceptance Criteria\n\n- [ ] No TypeScript warnings\n- [ ] Verify correct API usage per Letta SDK docs\n- [ ] Tests pass\n\n---\nHuly Issue: LETTA-40","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-56e","title":"Human-in-the-loop participation via Matrix","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.698791272Z","updated_at":"2025-12-22T23:47:01.698791272Z","comments":[{"id":529,"issue_id":"letta-opencode-plugin-56e","author":"node","text":"## Objective\n\nEnable optional human participation in OpenCode task rooms, allowing human PMs or experts to observe, intervene, and provide feedback through Matrix.\n\n## Scope\n\n- Add configuration for default human observers per task\n- Ensure human observers are invited with read-only permissions by default\n- Provide commands/actions for humans to escalate (e.g., request changes, halt execution)\n- Document human participation workflow\n\n## Acceptance Criteria\n\n- Human user receives invitation when enabled in configuration\n- Human messages are routed to both Letta calling agent and OpenCode dev agent\n- Human can trigger task cancellation or request changes via Matrix command\n- Documentation covers how humans join and interact with task rooms\n\n## Notes\n\n- Coordinate with permissions helper for power levels\n- Ensure logging for human interventions for auditing\n- Provide optional manual invitation command for ad-hoc observers\n\n---\nHuly Issue: LETTA-20","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-nod","title":"Implement agent context retrieval tools for OpenCode","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:03.255927403Z","updated_at":"2025-12-22T23:47:03.255927403Z"}
{"id":"letta-opencode-plugin-00za","title":"Implement bidirectional communication via memory blocks","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T15:11:43.218878055Z","updated_at":"2025-12-24T15:11:43.218878055Z"}
{"id":"letta-opencode-plugin-0cg","title":"Implement event pruning to prevent workspace block overflow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T05:50:22.117037936Z","updated_at":"2025-12-24T06:43:06.843975389Z","comments":[{"id":256,"issue_id":"letta-opencode-plugin-0cg","author":"node","text":"Synced from Beads: letta-opencode-plugin-eoh\n\n---\nHuly Issue: LETTA-129","created_at":"2025-12-24T05:50:22Z"}]}
{"id":"letta-opencode-plugin-24k","title":"Implement event streaming from OpenCode to Workspace and Matrix","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T03:11:47.647032337Z","updated_at":"2025-12-28T07:39:38.465774547Z","closed_at":"2025-12-28T07:39:38.465774547Z","close_reason":"Closed","comments":[{"id":203,"issue_id":"letta-opencode-plugin-24k","author":"node","text":"Synced from Beads: letta-opencode-plugin-ce3\n\n---\nHuly Issue: LETTA-114","created_at":"2025-12-24T03:11:47Z"}]}
{"id":"letta-opencode-plugin-7x8i","title":"Implement primary task delegation tool for agents","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T13:48:26.795486687Z","updated_at":"2025-12-24T13:48:26.795486687Z"}
{"id":"letta-opencode-plugin-3p7r","title":"Increase default MAX_CONCURRENT_TASKS from 3 to 10","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T11:54:16.538552814Z","updated_at":"2025-12-24T11:54:16.538552814Z","comments":[{"id":449,"issue_id":"letta-opencode-plugin-3p7r","author":"node","text":"Synced from Beads: letta-opencode-plugin-koz\n\n---\nHuly Issue: LETTA-83","created_at":"2025-12-24T11:54:16Z"}]}
{"id":"letta-opencode-plugin-8us5","title":"Integration tests for OpenCode server path","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T06:35:38.319698214Z","updated_at":"2025-12-27T22:13:39.654561391Z","comments":[{"id":280,"issue_id":"letta-opencode-plugin-8us5","author":"node","text":"Synced from Beads: letta-opencode-plugin-cgc\n\n---\nHuly Issue: LETTA-118","created_at":"2025-12-24T06:35:38Z"}]}
{"id":"letta-opencode-plugin-1lov","title":"Letta client adapter: agents/memory/messages with retries & 409 handling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:54:05.470191819Z","updated_at":"2025-12-26T21:54:05.470191819Z","comments":[{"id":605,"issue_id":"letta-opencode-plugin-1lov","author":"node","text":"Synced from Beads: letta-opencode-plugin-j04h\n\n---\nHuly Issue: LETTA-268","created_at":"2025-12-26T21:54:05Z"}]}
{"id":"letta-opencode-plugin-0min","title":"MCP Server MVP: OpenCode Appendage for Letta (Epic)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:53:27.034641871Z","updated_at":"2025-12-26T21:53:27.034641871Z","comments":[{"id":576,"issue_id":"letta-opencode-plugin-0min","author":"node","text":"Synced from Beads: letta-opencode-plugin-3ep\n\n---\nHuly Issue: LETTA-290","created_at":"2025-12-26T21:53:27Z"}]}
{"id":"letta-opencode-plugin-0lv","title":"MCP tools: opencode_execute_task (async/sync) with idempotency + queue","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.822896246Z","updated_at":"2025-12-22T23:47:02.822896246Z"}
{"id":"letta-opencode-plugin-3epj","title":"Map control signals to OpenCode (cancel/pause/resume)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T21:53:33.26405553Z","updated_at":"2025-12-26T21:53:33.26405553Z","comments":[{"id":587,"issue_id":"letta-opencode-plugin-3epj","author":"node","text":"Synced from Beads: letta-opencode-plugin-6o0h\n\n---\nHuly Issue: LETTA-288","created_at":"2025-12-26T21:53:33Z"}]}
{"id":"letta-opencode-plugin-1laq","title":"Matrix client integration for Letta OpenCode Plugin","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T09:27:57.567316253Z","updated_at":"2025-12-24T09:27:57.567316253Z","comments":[{"id":364,"issue_id":"letta-opencode-plugin-1laq","author":"node","text":"Synced from Beads: letta-opencode-plugin-463\n\n---\nHuly Issue: LETTA-78","created_at":"2025-12-24T09:27:57Z"}]}
{"id":"letta-opencode-plugin-092r","title":"Matrix conversation archiving and review tooling","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:55:46.619954185Z","updated_at":"2025-12-26T21:55:46.619954185Z","comments":[{"id":692,"issue_id":"letta-opencode-plugin-092r","author":"node","text":"Synced from Beads: letta-opencode-plugin-cix\n\n---\nHuly Issue: LETTA-187","created_at":"2025-12-26T21:55:46Z"}]}
{"id":"letta-opencode-plugin-04l","title":"Matrix message router and OpenCode signal bridge","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T05:54:52.221593591Z","updated_at":"2025-12-28T00:27:42.987639267Z","comments":[{"id":259,"issue_id":"letta-opencode-plugin-04l","author":"node","text":"Synced from Beads: letta-opencode-plugin-d7x\n\n---\nHuly Issue: LETTA-128","created_at":"2025-12-24T05:54:52Z"}]}
{"id":"letta-opencode-plugin-09l","title":"Matrix task room manager service","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.88743345Z","updated_at":"2025-12-22T23:47:02.88743345Z","comments":[{"id":527,"issue_id":"letta-opencode-plugin-09l","author":"node","text":"## Objective\n\nCreate a Matrix room manager service responsible for lifecycle management of task-specific rooms, including creation, participant management, and teardown.\n\n## Scope\n\n- Define MatrixRoomManager interface\n- Implement room creation with task metadata (name, topic, tags)\n- Invite participants (calling agent, dev agent, optional human observers)\n- Manage room permissions (widget support, read-only observers)\n- Handle room closure and archival\n\n## Acceptance Criteria\n\n- Calling  creates Matrix room titled  with topic set to task description\n-  handles both agent IDs and human Matrix user IDs\n-  archives room and posts closing summary\n- Room metadata includes task ID, agent IDs, timestamps\n\n## Notes\n\n- Use  patterns for power levels\n- Ensure human observers default to read-only permissions\n- Store room metadata in workspace block for retrieval\n\n---\nHuly Issue: LETTA-17","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-zknt","title":"Matrix-based multi-agent coordination via Synapse","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T14:31:25.69506668Z","updated_at":"2025-12-24T14:31:25.69506668Z","comments":[{"id":510,"issue_id":"letta-opencode-plugin-zknt","author":"node","text":"## Objective\n\nImplement Matrix (Synapse) as a coordination layer between Letta calling agents and OpenCode execution agents, enabling bidirectional communication, human-in-the-loop participation, and conversation archiving.\n\n## Scope\n\n- Create Matrix rooms per OpenCode task with automatic participant management\n- Route messages between Letta agents, OpenCode dev agents, and human observers\n- Support task control signals (cancel, pause/resume) and runtime updates\n- Archive conversations for later review and learning\n\n## Success Criteria\n\n- New Matrix integration architecture documented\n- End-to-end task flow demonstrated: task creation → Matrix room → bidirectional messaging → archival\n- Human observer can join task room and provide feedback\n\n## Deliverables\n\n1. Architecture & configuration docs\n2. Matrix coordination services (room manager, message router, communication layer)\n3. Integration tests covering agent ↔ dev ↔ human loop\n\n## Dependencies\n\n- LETTA-9 through LETTA-14 (MCP server core) – completed\n- LETTA-10 (Letta client adapter) – completed\n\n## Out of Scope\n\n- External federation across organizations\n- Advanced analytics/learning from conversations\n\n---\nHuly Issue: LETTA-15","created_at":"2025-12-24T14:31:25Z"}]}
{"id":"letta-opencode-plugin-4c7r","title":"Metrics, logs, kill switches + docs","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T21:53:21.546160841Z","updated_at":"2025-12-28T07:47:05.822612274Z","comments":[{"id":566,"issue_id":"letta-opencode-plugin-4c7r","author":"node","text":"Synced from Beads: letta-opencode-plugin-690l\n\n---\nHuly Issue: LETTA-293","created_at":"2025-12-26T21:53:21Z"}]}
{"id":"letta-opencode-plugin-0i8","title":"OpenCode Server Migration (replace CLI with HTTP API)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T02:40:15.670708542Z","updated_at":"2025-12-24T02:40:15.670708542Z","comments":[{"id":190,"issue_id":"letta-opencode-plugin-0i8","author":"node","text":"Synced from Beads: letta-opencode-plugin-5fx\n\n---\nHuly Issue: LETTA-95","created_at":"2025-12-24T02:40:15Z"}]}
{"id":"letta-opencode-plugin-134m","title":"Repo bootstrap: letta-x-opencode skeleton (HTTP MCP server)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T13:21:37.145689442Z","updated_at":"2025-12-24T13:21:37.145689442Z"}
{"id":"letta-opencode-plugin-00br","title":"Research Letta TypeScript SDK capabilities and API patterns","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T09:55:05.893830011Z","updated_at":"2025-12-24T09:55:05.893830011Z","comments":[{"id":387,"issue_id":"letta-opencode-plugin-00br","author":"node","text":"Synced from Beads: letta-opencode-plugin-743\n\n---\nHuly Issue: LETTA-79","created_at":"2025-12-24T09:55:06Z"}]}
{"id":"letta-opencode-plugin-3mhs","title":"Runtime updates and feedback loop implementation","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-24T10:03:51.958744806Z","updated_at":"2025-12-24T10:03:51.958744806Z","comments":[{"id":393,"issue_id":"letta-opencode-plugin-3mhs","author":"node","text":"Synced from Beads: letta-opencode-plugin-ana\n\n---\nHuly Issue: LETTA-77","created_at":"2025-12-24T10:03:52Z"}]}
{"id":"letta-opencode-plugin-6ri","title":"Task cancellation, pause, and resume support","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:02.568614408Z","updated_at":"2025-12-22T23:47:02.568614408Z","comments":[{"id":531,"issue_id":"letta-opencode-plugin-6ri","author":"node","text":"## Objective\n\nAdd task control capabilities (cancel, pause, resume) to the Letta OpenCode Plugin and ensure they are triggered via Matrix commands.\n\n## Scope\n\n- Extend ExecutionManager to support pause/resume signals\n- Implement safe cancellation that stops Docker container execution\n- Connect Matrix control messages to task control actions\n- Update workspace blocks with control status changes\n\n## Acceptance Criteria\n\n- Sending  command in Matrix immediately stops task execution and updates status\n- Pause/resume commands suspend and resume container execution with logging\n- Workspace block events reflect control actions with timestamps\n- Automated tests cover control flows and error cases (e.g., pause before start)\n\n## Notes\n\n- Coordinate with TaskRegistry for status tracking\n- Consider Docker pause/unpause for container control\n- Ensure idempotent control actions (no double cancellation)\n\n---\nHuly Issue: LETTA-21","created_at":"2025-12-24T21:58:39Z"}]}
{"id":"letta-opencode-plugin-0fe3","title":"Types and config updates for OpenCode integration","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T12:16:13.324447027Z","updated_at":"2025-12-26T23:54:04.569434044Z","comments":[{"id":469,"issue_id":"letta-opencode-plugin-0fe3","author":"node","text":"## Objective\n\nReview the archived repo https://github.com/frap129/opencode-mcp-tool and decide what to reuse for our MCP-only OpenCode appendage server.\n\n## Findings (initial)\n\n- Uses @modelcontextprotocol/sdk v0.5.0 (outdated) and StdioServerTransport only\n- Provides MCP server skeleton with tools registry, prompts, progress notifications/keepalive\n- Tools implemented: ask-opencode, brainstorm, timeout-test, ping, help, slash commands\n- Executes OpenCode via local CLI (no containerization, no Letta integration)\n- No auth, idempotency, queuing, or workspace block concepts\n- MIT licensed (compatible for reuse)\n\n## Reuse Plan\n\n- Reuse: tool registry pattern, progress notification keepalive loop, CLI execution wrapper abstraction\n- Replace: transport with Streamable HTTP, SDK ^1.16.0, tool set with our  +  tools\n- Add: Letta API client, Execution Manager (container spawn/limits), idempotency/queue, optimistic concurrency on workspace blocks\n\n## Deliverables\n\n1. Delta design doc (what to keep, what to change)\n2. Migration tasks list (SDK upgrade, transport switch, new tools, remove legacy tools)\n3. Spike PR to port skeleton and boot a streamable HTTP MCP server\n\n## Acceptance Criteria\n\n- Documented decision (reuse vs fresh)\n- If reuse: working HTTP MCP server boots with health log\n- Clear task breakdown for upgrade path\n\n---\nHuly Issue: LETTA-7","created_at":"2025-12-24T12:16:13Z"}]}
{"id":"letta-opencode-plugin-v539","title":"Upgrade @opencode-ai/sdk from 0.15.0 to 1.0.x","description":"The OpenCode SDK has had a major version bump from 0.15.x to 1.0.x. This requires updating our dependency and ensuring compatibility with the new API.\n\n## Background\n- Current SDK version: 0.15.0\n- Latest SDK version: 1.0.204\n- OpenCode 1.0 is a complete TUI rewrite but the server API is largely unchanged\n\n## Tasks\n- [ ] Update package.json dependency\n- [ ] Review API changes in opencode-client-manager.ts\n- [ ] Update event subscription handling if needed\n- [ ] Add tests for critical SDK interactions\n- [ ] Rebuild and test container\n\n## SDK Methods Used\n- createOpencodeClient\n- session.create, session.prompt, session.abort, session.get\n- event.subscribe\n- file.status, file.read","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T05:35:17.231720249Z","updated_at":"2025-12-28T07:39:38.543910913Z","closed_at":"2025-12-28T07:39:38.543910913Z","close_reason":"Closed"}
{"id":"letta-opencode-plugin-hmm","title":"Workspace block schema + optimistic concurrency helpers","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:47:01.792909031Z","updated_at":"2025-12-22T23:47:01.792909031Z"}
